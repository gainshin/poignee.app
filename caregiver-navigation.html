<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PoignÃ©e ä¼´é˜® - å®¶åº­ç…§è­·åŠ©æ‰‹ (å«å°èˆªåŠŸèƒ½)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Noto Sans TC', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #fef7ff 0%, #fdf2f8 25%, #eff6ff 75%, #f0f9ff 100%);
        }
        .glass-card {
            backdrop-filter: blur(16px);
            background: rgba(255, 255, 255, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        .glass-button {
            backdrop-filter: blur(16px);
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        .glass-button:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(0.95);
        }
        .glass-button.active {
            background: rgba(147, 51, 234, 0.3);
            border-color: rgba(147, 51, 234, 0.5);
        }
        .gradient-text {
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
        .alert-high { background: rgba(239, 68, 68, 0.1); border-color: rgba(239, 68, 68, 0.3); }
        .alert-medium { background: rgba(245, 158, 11, 0.1); border-color: rgba(245, 158, 11, 0.3); }
        .alert-low { background: rgba(34, 197, 94, 0.1); border-color: rgba(34, 197, 94, 0.3); }
        .floating-bg {
            position: fixed;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            mix-blend-mode: multiply;
            filter: blur(40px);
            opacity: 0.2;
            animation: float 8s ease-in-out infinite;
            pointer-events: none;
        }
        .floating-bg:nth-child(1) {
            background: #a855f7;
            top: 2rem;
            left: 1rem;
        }
        .floating-bg:nth-child(2) {
            background: #ec4899;
            top: 8rem;
            right: 1rem;
            animation-delay: 2s;
        }
        .floating-bg:nth-child(3) {
            background: #3b82f6;
            bottom: 8rem;
            left: 50%;
            transform: translateX(-50%);
            animation-delay: 4s;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px) translateX(0px); }
            50% { transform: translateY(-15px) translateX(8px); }
        }
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .driving-status {
            background: linear-gradient(135deg, #06b6d4, #3b82f6);
            color: white;
        }
        .safe-zone { background: rgba(34, 197, 94, 0.1); border-color: rgba(34, 197, 94, 0.3); }
        .warning-zone { background: rgba(245, 158, 11, 0.1); border-color: rgba(245, 158, 11, 0.3); }
        .danger-zone { background: rgba(239, 68, 68, 0.1); border-color: rgba(239, 68, 68, 0.3); }
    </style>
</head>
<body class="min-h-screen pb-20">
    <!-- Floating Background Elements -->
    <div class="floating-bg"></div>
    <div class="floating-bg"></div>
    <div class="floating-bg"></div>

    <!-- Main Container -->
    <div class="relative z-10">
        
        <!-- Dashboard Page -->
        <div id="dashboard" class="page active p-4 space-y-4">
            <!-- Header with Patient Info -->
            <div class="glass-card rounded-2xl p-4">
                <div class="flex items-center justify-between mb-3">
                    <div>
                        <h1 class="text-xl font-bold gradient-text">ç…§è­·ä¸­å¿ƒ</h1>
                        <p class="text-sm text-gray-600">ç‹çˆºçˆºçš„ç…§è­·ç‹€æ³</p>
                    </div>
                    <div class="text-right">
                        <div class="text-sm text-gray-500" id="currentTime"></div>
                        <div class="text-xs text-gray-400">æœ€å¾Œæ›´æ–°</div>
                    </div>
                </div>
                <div class="flex items-center gap-3 p-3 bg-white/20 rounded-xl">
                    <div class="text-3xl">ğŸ‘´</div>
                    <div class="flex-1">
                        <h3 class="font-semibold">ç‹çˆºçˆº (78æ­²)</h3>
                        <p class="text-sm text-gray-600">è¼•åº¦èªçŸ¥éšœç¤™ â€¢ å±…å®¶ç…§è­·</p>
                        <div class="flex items-center gap-2 mt-1">
                            <div class="w-2 h-2 bg-green-500 rounded-full pulse-animation"></div>
                            <span class="text-xs text-green-600">ç‹€æ…‹æ­£å¸¸</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Driving Status Alert -->
            <div id="drivingAlert" class="glass-card rounded-2xl p-4 driving-status hidden">
                <div class="flex items-center gap-3 mb-3">
                    <div class="text-3xl">ğŸš—</div>
                    <div class="flex-1">
                        <h3 class="font-semibold text-white">å¤–å‡ºé§•é§›ä¸­</h3>
                        <p class="text-sm text-blue-100">ç‹çˆºçˆºæ­£åœ¨ä½¿ç”¨é è¨­è·¯ç·šå‰å¾€ç¾å»‰ç¤¾</p>
                    </div>
                    <button onclick="showDrivingDetail()" class="glass-button rounded-lg px-3 py-1 text-xs text-white">
                        æŸ¥çœ‹è©³æƒ…
                    </button>
                </div>
                <div class="grid grid-cols-3 gap-2 text-center text-sm">
                    <div>
                        <div class="font-bold text-white">15åˆ†é˜</div>
                        <div class="text-xs text-blue-100">é è¨ˆè¡Œç¨‹</div>
                    </div>
                    <div>
                        <div class="font-bold text-white">8åˆ†é˜</div>
                        <div class="text-xs text-blue-100">å·²è¡Œé§›</div>
                    </div>
                    <div>
                        <div class="font-bold text-white">æ­£å¸¸</div>
                        <div class="text-xs text-blue-100">è·¯ç·šç‹€æ³</div>
                    </div>
                </div>
            </div>

            <!-- Critical Alerts -->
            <div id="alertsContainer">
                <div class="glass-card rounded-2xl p-4 alert-medium">
                    <div class="flex items-start gap-3">
                        <div class="text-2xl">âš ï¸</div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-orange-700">éœ€è¦é—œæ³¨</h3>
                            <p class="text-sm text-gray-700 mb-2">ç‹çˆºçˆºä»Šå¤©ä¸‹åˆä¼¼ä¹æœ‰äº›ç„¦æ…®ä¸å®‰ï¼ŒæåŠæ‰¾ä¸åˆ°é‡è¦ç‰©å“</p>
                            <div class="flex gap-2">
                                <button onclick="showAlertDetail('anxiety')" class="glass-button rounded-lg px-3 py-1 text-xs">æŸ¥çœ‹è©³æƒ…</button>
                                <button onclick="dismissAlert('anxiety')" class="glass-button rounded-lg px-3 py-1 text-xs">æ¨™è¨˜è™•ç†</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Today's Summary -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">ä»Šæ—¥æ¦‚æ³</h2>
                <div class="grid grid-cols-2 gap-3 mb-4">
                    <div class="bg-white/20 rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">ğŸš—</div>
                        <div class="text-lg font-bold">2</div>
                        <div class="text-xs text-gray-600">å¤–å‡ºæ¬¡æ•¸</div>
                    </div>
                    <div class="bg-white/20 rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">ğŸ—ºï¸</div>
                        <div class="text-lg font-bold">100%</div>
                        <div class="text-xs text-gray-600">å®‰å…¨æŠµé”</div>
                    </div>
                    <div class="bg-white/20 rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">ğŸ˜Š</div>
                        <div class="text-sm font-bold">å¹³éœ</div>
                        <div class="text-xs text-gray-600">æ•´é«”æƒ…ç·’</div>
                    </div>
                    <div class="bg-white/20 rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">ğŸ’Š</div>
                        <div class="text-lg font-bold">3/3</div>
                        <div class="text-xs text-gray-600">ç”¨è—¥å®Œæˆ</div>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="grid grid-cols-2 gap-2">
                    <button onclick="navigateTo('navigation')" class="glass-button rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">ğŸš—</div>
                        <div class="text-sm">å°èˆªè¨­ç½®</div>
                    </button>
                    <button onclick="askAIAssistant()" class="glass-button rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">ğŸ¤–</div>
                        <div class="text-sm">è«®è©¢å°é›¨</div>
                    </button>
                </div>
            </div>

            <!-- Recent Activities -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">æœ€è¿‘æ´»å‹•</h2>
                <div class="space-y-3">
                    <div class="flex items-center gap-3 p-2 bg-white/20 rounded-lg">
                        <div class="text-xl">ğŸš—</div>
                        <div class="flex-1">
                            <div class="text-sm font-medium">å¤–å‡ºè³¼ç‰© - ç¾å»‰ç¤¾</div>
                            <div class="text-xs text-gray-600">14:30 â€¢ é †åˆ©æŠµé”ï¼Œåœç•™25åˆ†é˜</div>
                        </div>
                        <div class="text-xs text-green-600">å®‰å…¨</div>
                    </div>
                    <div class="flex items-center gap-3 p-2 bg-white/20 rounded-lg">
                        <div class="text-xl">ğŸ½ï¸</div>
                        <div class="flex-1">
                            <div class="text-sm font-medium">åˆé¤ç”¨é¤</div>
                            <div class="text-xs text-gray-600">12:30 â€¢ é£Ÿæ…¾è‰¯å¥½ï¼Œç”¨é¤å®Œæˆ</div>
                        </div>
                    </div>
                    <div class="flex items-center gap-3 p-2 bg-white/20 rounded-lg">
                        <div class="text-xl">ğŸš—</div>
                        <div class="flex-1">
                            <div class="text-sm font-medium">å¤–å‡ºçœ‹è¨º - æ—é†«å¸«è¨ºæ‰€</div>
                            <div class="text-xs text-gray-600">10:30 â€¢ å®šæœŸå›è¨ºï¼Œä¸€åˆ‡æ­£å¸¸</div>
                        </div>
                        <div class="text-xs text-green-600">å®‰å…¨</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation & Driving Safety Page -->
        <div id="navigation" class="page p-4 space-y-4">
            <!-- Header -->
            <div class="glass-card rounded-2xl p-4">
                <div class="flex items-center gap-3">
                    <div class="text-3xl">ğŸš—</div>
                    <div>
                        <h1 class="text-xl font-bold gradient-text">å°èˆªèˆ‡é§•é§›å®‰å…¨</h1>
                        <p class="text-sm text-gray-600">ç®¡ç†å¤–å‡ºè·¯ç·šèˆ‡CarPlayè¨­ç½®</p>
                    </div>
                </div>
            </div>

            <!-- Current Driving Status -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">ç›®å‰ç‹€æ…‹</h2>
                <div id="currentDrivingStatus" class="p-4 safe-zone rounded-xl">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center gap-3">
                            <div class="text-2xl">ğŸ </div>
                            <div>
                                <h3 class="font-semibold">åœ¨å®¶ä¸­</h3>
                                <p class="text-sm text-gray-600">æœ€å¾Œå®šä½ï¼šå°åŒ—å¸‚å¤§å®‰å€</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-sm font-bold text-green-700">å®‰å…¨</div>
                            <div class="text-xs text-gray-500">15:45 æ›´æ–°</div>
                        </div>
                    </div>
                    <button onclick="refreshLocation()" class="glass-button rounded-lg px-3 py-1 text-xs">
                        ğŸ”„ é‡æ–°æ•´ç†ä½ç½®
                    </button>
                </div>
            </div>

            <!-- Preset Routes Management -->
            <div class="glass-card rounded-2xl p-4">
                <div class="flex items-center justify-between mb-3">
                    <h2 class="text-lg font-semibold">é è¨­è·¯ç·š</h2>
                    <button onclick="addNewRoute()" class="glass-button rounded-lg px-3 py-1 text-xs">
                        â• æ–°å¢è·¯ç·š
                    </button>
                </div>
                <div class="space-y-3" id="presetRoutes">
                    <div class="p-3 bg-white/20 rounded-xl">
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex items-center gap-3">
                                <div class="text-2xl">ğŸª</div>
                                <div>
                                    <h3 class="font-semibold">ç¾å»‰ç¤¾ - å¤§å®‰åº—</h3>
                                    <p class="text-sm text-gray-600">è»Šç¨‹ 8 åˆ†é˜ â€¢ è·é›¢ 2.3 å…¬é‡Œ</p>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="editRoute('supermarket')" class="glass-button rounded-lg px-2 py-1 text-xs">ç·¨è¼¯</button>
                                <button onclick="activateRoute('supermarket')" class="glass-button rounded-lg px-2 py-1 text-xs bg-green-100">å•Ÿç”¨</button>
                            </div>
                        </div>
                        <div class="text-xs text-gray-500">
                            æœ€å¾Œä½¿ç”¨ï¼šä»Šå¤© 14:30 â€¢ å®‰å…¨æŠµé” âœ…
                        </div>
                    </div>

                    <div class="p-3 bg-white/20 rounded-xl">
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex items-center gap-3">
                                <div class="text-2xl">ğŸ¥</div>
                                <div>
                                    <h3 class="font-semibold">æ—é†«å¸«è¨ºæ‰€</h3>
                                    <p class="text-sm text-gray-600">è»Šç¨‹ 12 åˆ†é˜ â€¢ è·é›¢ 3.8 å…¬é‡Œ</p>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="editRoute('clinic')" class="glass-button rounded-lg px-2 py-1 text-xs">ç·¨è¼¯</button>
                                <button onclick="activateRoute('clinic')" class="glass-button rounded-lg px-2 py-1 text-xs">å•Ÿç”¨</button>
                            </div>
                        </div>
                        <div class="text-xs text-gray-500">
                            æœ€å¾Œä½¿ç”¨ï¼šä»Šå¤© 10:30 â€¢ å®‰å…¨æŠµé” âœ…
                        </div>
                    </div>

                    <div class="p-3 bg-white/20 rounded-xl">
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex items-center gap-3">
                                <div class="text-2xl">ğŸï¸</div>
                                <div>
                                    <h3 class="font-semibold">å¤§å®‰æ£®æ—å…¬åœ’</h3>
                                    <p class="text-sm text-gray-600">è»Šç¨‹ 6 åˆ†é˜ â€¢ è·é›¢ 1.8 å…¬é‡Œ</p>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="editRoute('park')" class="glass-button rounded-lg px-2 py-1 text-xs">ç·¨è¼¯</button>
                                <button onclick="activateRoute('park')" class="glass-button rounded-lg px-2 py-1 text-xs">å•Ÿç”¨</button>
                            </div>
                        </div>
                        <div class="text-xs text-gray-500">
                            æœ€å¾Œä½¿ç”¨ï¼šæ˜¨å¤© 16:20 â€¢ å®‰å…¨æŠµé” âœ…
                        </div>
                    </div>
                </div>
            </div>

            <!-- CarPlay Interface Settings -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">CarPlay ä»‹é¢è¨­ç½®</h2>
                <div class="space-y-3">
                    <div class="p-3 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl">
                        <h4 class="font-medium mb-2">ğŸš— è»Šè¼‰é¡¯ç¤ºè¨­å®š</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex items-center justify-between">
                                <span>å¤§å­—é«”æ¨¡å¼</span>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" checked class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span>èªéŸ³å¼•å°</span>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" checked class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span>ç°¡åŒ–ä»‹é¢</span>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" checked class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="p-3 bg-gradient-to-r from-green-50 to-blue-50 rounded-xl">
                        <h4 class="font-medium mb-2">ğŸ”Š èªéŸ³è¨­å®š</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex items-center justify-between">
                                <span>èªéŸ³é€Ÿåº¦</span>
                                <select class="glass-button rounded px-2 py-1 text-xs">
                                    <option>ç·©æ…¢</option>
                                    <option selected>æ­£å¸¸</option>
                                    <option>å¿«é€Ÿ</option>
                                </select>
                            </div>
                            <div class="flex items-center justify-between">
                                <span>éŸ³é‡</span>
                                <input type="range" min="1" max="10" value="7" class="w-20">
                            </div>
                        </div>
                    </div>

                    <div class="p-3 bg-gradient-to-r from-orange-50 to-red-50 rounded-xl">
                        <h4 class="font-medium mb-2">âš ï¸ å®‰å…¨è¨­å®š</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex items-center justify-between">
                                <span>åé›¢è·¯ç·šè­¦å‘Š</span>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" checked class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span>ç·Šæ€¥è¯çµ¡æŒ‰éˆ•</span>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" checked class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span>è‡ªå‹•å›å®¶æé†’</span>
                                <select class="glass-button rounded px-2 py-1 text-xs">
                                    <option>30åˆ†é˜</option>
                                    <option selected>1å°æ™‚</option>
                                    <option>2å°æ™‚</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Safety Zones -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">å®‰å…¨å€åŸŸè¨­å®š</h2>
                <div class="space-y-3">
                    <div class="p-3 safe-zone rounded-xl">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="text-2xl">ğŸŸ¢</div>
                                <div>
                                    <h4 class="font-medium">å®‰å…¨å€åŸŸ</h4>
                                    <p class="text-xs text-gray-600">å®¶é™„è¿‘ 2 å…¬é‡Œç¯„åœ</p>
                                </div>
                            </div>
                            <button onclick="editSafeZone('safe')" class="glass-button rounded-lg px-2 py-1 text-xs">ç·¨è¼¯</button>
                        </div>
                    </div>
                    
                    <div class="p-3 warning-zone rounded-xl">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="text-2xl">ğŸŸ¡</div>
                                <div>
                                    <h4 class="font-medium">æ³¨æ„å€åŸŸ</h4>
                                    <p class="text-xs text-gray-600">2-5 å…¬é‡Œç¯„åœï¼Œç™¼é€æé†’</p>
                                </div>
                            </div>
                            <button onclick="editSafeZone('warning')" class="glass-button rounded-lg px-2 py-1 text-xs">ç·¨è¼¯</button>
                        </div>
                    </div>
                    
                    <div class="p-3 danger-zone rounded-xl">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="text-2xl">ğŸ”´</div>
                                <div>
                                    <h4 class="font-medium">è­¦æˆ’å€åŸŸ</h4>
                                    <p class="text-xs text-gray-600">è¶…é 5 å…¬é‡Œï¼Œç«‹å³é€šçŸ¥</p>
                                </div>
                            </div>
                            <button onclick="editSafeZone('danger')" class="glass-button rounded-lg px-2 py-1 text-xs">ç·¨è¼¯</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Trips -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">æœ€è¿‘è¡Œç¨‹è¨˜éŒ„</h2>
                <div class="space-y-3">
                    <div class="p-3 bg-white/20 rounded-xl">
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex items-center gap-3">
                                <div class="text-xl">ğŸª</div>
                                <div>
                                    <h4 class="font-medium text-sm">å‰å¾€ç¾å»‰ç¤¾</h4>
                                    <p class="text-xs text-gray-600">ä»Šå¤© 14:30 â†’ 15:05</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-xs text-green-600">âœ… å®‰å…¨æŠµé”</div>
                                <div class="text-xs text-gray-500">è¡Œç¨‹ 35åˆ†é˜</div>
                            </div>
                        </div>
                        <div class="text-xs text-gray-500">
                            è·¯ç·šï¼šæŒ‰é è¨­è·¯ç·š â€¢ ç„¡åé›¢ â€¢ åœç•™æ™‚é–“æ­£å¸¸
                        </div>
                    </div>

                    <div class="p-3 bg-white/20 rounded-xl">
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex items-center gap-3">
                                <div class="text-xl">ğŸ¥</div>
                                <div>
                                    <h4 class="font-medium text-sm">æ—é†«å¸«è¨ºæ‰€</h4>
                                    <p class="text-xs text-gray-600">ä»Šå¤© 10:30 â†’ 11:45</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-xs text-green-600">âœ… å®‰å…¨æŠµé”</div>
                                <div class="text-xs text-gray-500">è¡Œç¨‹ 1å°æ™‚15åˆ†</div>
                            </div>
                        </div>
                        <div class="text-xs text-gray-500">
                            è·¯ç·šï¼šæŒ‰é è¨­è·¯ç·š â€¢ ç„¡åé›¢ â€¢ å®šæœŸå›è¨º
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Assistant Page -->
        <div id="assistant" class="page p-4 space-y-4">
            <!-- Header -->
            <div class="glass-card rounded-2xl p-4">
                <div class="flex items-center gap-3">
                    <div class="text-3xl">ğŸ¤–</div>
                    <div>
                        <h1 class="text-xl font-bold gradient-text">AI åŠ©ç† - å°é›¨</h1>
                        <p class="text-sm text-gray-600">å°ˆæ¥­ç…§è­·è«®è©¢èˆ‡å»ºè­°</p>
                    </div>
                </div>
            </div>

            <!-- Quick Questions -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">å¸¸è¦‹å•é¡Œ</h2>
                <div class="space-y-2">
                    <button onclick="askQuestion('driving')" class="w-full glass-button rounded-xl p-3 text-left">
                        <div class="font-medium text-sm">å¤±æ™ºæ‚£è€…é§•é§›å®‰å…¨è©•ä¼°</div>
                        <div class="text-xs text-gray-600 mt-1">ä½•æ™‚è©²é™åˆ¶é§•é§›ï¼Ÿå¦‚ä½•å®‰å…¨éæ¸¡ï¼Ÿ</div>
                    </button>
                    <button onclick="askQuestion('navigation')" class="w-full glass-button rounded-xl p-3 text-left">
                        <div class="font-medium text-sm">å°èˆªç³»çµ±è¨­ç½®å»ºè­°</div>
                        <div class="text-xs text-gray-600 mt-1">å¦‚ä½•è¨­å®šé©åˆå¤±æ™ºæ‚£è€…çš„å°èˆªä»‹é¢</div>
                    </button>
                    <button onclick="askQuestion('behavior')" class="w-full glass-button rounded-xl p-3 text-left">
                        <div class="font-medium text-sm">å¦‚ä½•æ‡‰å°é‡è¤‡æ€§è¡Œç‚ºï¼Ÿ</div>
                        <div class="text-xs text-gray-600 mt-1">è™•ç†å¤±æ™ºæ‚£è€…çš„é‡è¤‡å•é¡Œå’Œè¡Œç‚º</div>
                    </button>
                    <button onclick="askQuestion('communication')" class="w-full glass-button rounded-xl p-3 text-left">
                        <div class="font-medium text-sm">æœ‰æ•ˆæºé€šæŠ€å·§</div>
                        <div class="text-xs text-gray-600 mt-1">èˆ‡å¤±æ™ºæ‚£è€…æºé€šçš„æœ€ä½³æ–¹å¼</div>
                    </button>
                </div>
            </div>

            <!-- Chat Interface -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">è«®è©¢å°è©±</h2>
                <div class="h-48 overflow-y-auto mb-3 space-y-3" id="aiChatMessages">
                    <div class="bg-white/50 rounded-xl p-3">
                        <p class="text-sm">æ‚¨å¥½ï¼æˆ‘æ˜¯å°é›¨ï¼Œå°ˆé–€å”åŠ©å¤±æ™ºç—‡å®¶åº­ç…§è­·ã€‚æˆ‘å¯ä»¥ç‚ºæ‚¨æä¾›é§•é§›å®‰å…¨ã€å°èˆªè¨­ç½®ã€è¡Œç‚ºç®¡ç†ç­‰å„æ–¹é¢çš„å°ˆæ¥­å»ºè­°ã€‚æœ‰ä»»ä½•å•é¡Œéƒ½å¯ä»¥å•æˆ‘ï¼</p>
                        <div class="text-xs text-gray-500 mt-1">å°é›¨ â€¢ æ™ºèƒ½åŠ©ç†</div>
                    </div>
                </div>
                <div class="flex gap-2">
                    <input type="text" id="aiQuestion" placeholder="è¼¸å…¥æ‚¨çš„å•é¡Œ..." class="flex-1 glass-button rounded-xl px-3 py-2 text-sm">
                    <button onclick="sendAIMessage()" class="glass-button rounded-xl px-4 py-2 text-sm">
                        ç™¼é€
                    </button>
                </div>
            </div>
        </div>

        <!-- Monitoring Page -->
        <div id="monitoring" class="page p-4 space-y-4">
            <!-- Header -->
            <div class="glass-card rounded-2xl p-4">
                <h1 class="text-xl font-bold gradient-text mb-2">å¥åº·ç›£æ¸¬</h1>
                <p class="text-sm text-gray-600">ç‹çˆºçˆºçš„å¥åº·ç‹€æ³è¿½è¹¤</p>
            </div>

            <!-- Vital Signs -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">ç”Ÿç†æŒ‡æ¨™</h2>
                <div class="grid grid-cols-2 gap-3">
                    <div class="bg-white/20 rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">â¤ï¸</div>
                        <div class="text-lg font-bold">78</div>
                        <div class="text-xs text-gray-600">å¿ƒç‡ (bpm)</div>
                        <div class="text-xs text-green-600">æ­£å¸¸</div>
                    </div>
                    <div class="bg-white/20 rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">ğŸ©º</div>
                        <div class="text-sm font-bold">125/80</div>
                        <div class="text-xs text-gray-600">è¡€å£“ (mmHg)</div>
                        <div class="text-xs text-green-600">æ­£å¸¸</div>
                    </div>
                    <div class="bg-white/20 rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">ğŸŒ¡ï¸</div>
                        <div class="text-lg font-bold">36.8Â°C</div>
                        <div class="text-xs text-gray-600">é«”æº«</div>
                        <div class="text-xs text-green-600">æ­£å¸¸</div>
                    </div>
                    <div class="bg-white/20 rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">ğŸ˜´</div>
                        <div class="text-lg font-bold">7.2h</div>
                        <div class="text-xs text-gray-600">æ˜¨æ™šç¡çœ </div>
                        <div class="text-xs text-green-600">å……è¶³</div>
                    </div>
                </div>
            </div>

            <!-- Driving Safety Metrics -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">é§•é§›å®‰å…¨æŒ‡æ¨™</h2>
                <div class="grid grid-cols-2 gap-3">
                    <div class="bg-white/20 rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">ğŸš—</div>
                        <div class="text-lg font-bold">100%</div>
                        <div class="text-xs text-gray-600">å®‰å…¨æŠµé”ç‡</div>
                        <div class="text-xs text-green-600">æœ¬é€±</div>
                    </div>
                    <div class="bg-white/20 rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">ğŸ›£ï¸</div>
                        <div class="text-lg font-bold">0</div>
                        <div class="text-xs text-gray-600">è·¯ç·šåé›¢æ¬¡æ•¸</div>
                        <div class="text-xs text-green-600">æœ¬é€±</div>
                    </div>
                    <div class="bg-white/20 rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">â±ï¸</div>
                        <div class="text-lg font-bold">45åˆ†é˜</div>
                        <div class="text-xs text-gray-600">å¹³å‡å¤–å‡ºæ™‚é–“</div>
                        <div class="text-xs text-blue-600">æœ¬é€±</div>
                    </div>
                    <div class="bg-white/20 rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">ğŸ“</div>
                        <div class="text-lg font-bold">5</div>
                        <div class="text-xs text-gray-600">ä½¿ç”¨é è¨­è·¯ç·š</div>
                        <div class="text-xs text-blue-600">æœ¬é€±</div>
                    </div>
                </div>
            </div>

            <!-- Behavioral Trends -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">è¡Œç‚ºè¶¨å‹¢</h2>
                <canvas id="behaviorChart" width="400" height="200"></canvas>
            </div>
        </div>

        <!-- Resources Page -->
        <div id="resources" class="page p-4 space-y-4">
            <!-- Header -->
            <div class="glass-card rounded-2xl p-4">
                <h1 class="text-xl font-bold gradient-text mb-2">ç…§è­·è³‡æº</h1>
                <p class="text-sm text-gray-600">ç”Ÿæ´»è¼”åŠ©ææ–™èˆ‡ç…§è­·æŒ‡å¼•</p>
            </div>

            <!-- Emergency Contacts -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">ç·Šæ€¥è¯çµ¡</h2>
                <div class="space-y-2">
                    <button onclick="emergencyCall('doctor')" class="w-full glass-button rounded-xl p-3 flex items-center gap-3">
                        <div class="text-2xl">ğŸ‘¨â€âš•ï¸</div>
                        <div class="text-left flex-1">
                            <div class="font-medium text-sm">æ—é†«å¸«</div>
                            <div class="text-xs text-gray-600">ç¥ç¶“å…§ç§‘ â€¢ (02) 2345-6789</div>
                        </div>
                        <div class="text-xl">ğŸ“</div>
                    </button>
                    <button onclick="emergencyCall('police')" class="w-full glass-button rounded-xl p-3 flex items-center gap-3">
                        <div class="text-2xl">ğŸ‘®â€â™‚ï¸</div>
                        <div class="text-left flex-1">
                            <div class="font-medium text-sm">å¤§å®‰åˆ†å±€</div>
                            <div class="text-xs text-gray-600">èµ°å¤±å”å°‹ â€¢ (02) 2700-4500</div>
                        </div>
                        <div class="text-xl">ğŸ“</div>
                    </button>
                    <button onclick="emergencyCall('roadside')" class="w-full glass-button rounded-xl p-3 flex items-center gap-3">
                        <div class="text-2xl">ğŸš—</div>
                        <div class="text-left flex-1">
                            <div class="font-medium text-sm">é“è·¯æ•‘æ´</div>
                            <div class="text-xs text-gray-600">è»Šè¼›æ•…éšœ â€¢ 0800-123-456</div>
                        </div>
                        <div class="text-xl">ğŸ“</div>
                    </button>
                    <button onclick="emergencyCall('emergency')" class="w-full glass-button rounded-xl p-3 flex items-center gap-3 bg-red-100/50">
                        <div class="text-2xl">ğŸš¨</div>
                        <div class="text-left flex-1">
                            <div class="font-medium text-sm text-red-700">ç·Šæ€¥æ•‘è­·</div>
                            <div class="text-xs text-red-600">119 æ€¥æ•‘å°ˆç·š</div>
                        </div>
                        <div class="text-xl">ğŸ“</div>
                    </button>
                </div>
            </div>

            <!-- Driving Safety Materials -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">é§•é§›å®‰å…¨è³‡æ–™</h2>
                <div class="space-y-3">
                    <button onclick="showMaterial('driving-assessment')" class="w-full glass-button rounded-xl p-3 text-left">
                        <div class="flex items-center gap-3">
                            <div class="text-2xl">ğŸ“‹</div>
                            <div class="flex-1">
                                <div class="font-medium text-sm">é§•é§›èƒ½åŠ›è©•ä¼°è¡¨</div>
                                <div class="text-xs text-gray-600">å®šæœŸè©•ä¼°é§•é§›å®‰å…¨æ€§</div>
                            </div>
                            <div class="text-lg">â–¶ï¸</div>
                        </div>
                    </button>
                    <button onclick="showMaterial('car-preparation')" class="w-full glass-button rounded-xl p-3 text-left">
                        <div class="flex items-center gap-3">
                            <div class="text-2xl">ğŸ”§</div>
                            <div class="flex-1">
                                <div class="font-medium text-sm">è»Šè¼›æº–å‚™æ¸…å–®</div>
                                <div class="text-xs text-gray-600">å¤–å‡ºå‰è»Šè¼›å®‰å…¨æª¢æŸ¥</div>
                            </div>
                            <div class="text-lg">â–¶ï¸</div>
                        </div>
                    </button>
                    <button onclick="showMaterial('emergency-kit')" class="w-full glass-button rounded-xl p-3 text-left">
                        <div class="flex items-center gap-3">
                            <div class="text-2xl">ğŸ’</div>
                            <div class="flex-1">
                                <div class="font-medium text-sm">è»Šç”¨ç·Šæ€¥åŒ…</div>
                                <div class="text-xs text-gray-600">å¿…å‚™ç·Šæ€¥ç”¨å“æ¸…å–®</div>
                            </div>
                            <div class="text-lg">â–¶ï¸</div>
                        </div>
                    </button>
                </div>
            </div>
        </div>

        <!-- Family Communication Page -->
        <div id="family" class="page p-4 space-y-4">
            <!-- Header -->
            <div class="glass-card rounded-2xl p-4">
                <h1 class="text-xl font-bold gradient-text mb-2">å®¶åº­è¯ç¹«</h1>
                <p class="text-sm text-gray-600">èˆ‡å…¶ä»–å®¶åº­æˆå“¡å”èª¿ç…§è­·</p>
            </div>

            <!-- Family Members -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">ç…§è­·åœ˜éšŠ</h2>
                <div class="space-y-3">
                    <div class="p-3 bg-white/20 rounded-xl">
                        <div class="flex items-center justify-between mb-2">
                            <div>
                                <h3 class="font-semibold">David Wang (å…’å­)</h3>
                                <p class="text-sm text-gray-600">ä¸»è¦ç…§è­·è€… â€¢ æº«å“¥è¯</p>
                            </div>
                            <div class="text-right">
                                <div class="text-sm text-gray-500">æº«å“¥è¯æ™‚é–“</div>
                                <div class="font-semibold" id="vancouverTime2">03:30</div>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <button class="glass-button rounded-lg px-3 py-1 text-xs">ğŸ“ é€šè©±</button>
                            <button onclick="sendUpdate('david')" class="glass-button rounded-lg px-3 py-1 text-xs">ğŸ“¤ ç™¼é€æ›´æ–°</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Daily Report -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">ä»Šæ—¥å ±å‘Š</h2>
                <div class="p-3 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl mb-3">
                    <h4 class="font-medium mb-2">ğŸ“‹ ç…§è­·æ‘˜è¦</h4>
                    <div class="text-sm space-y-1">
                        <p>â€¢ å¤–å‡ºç‹€æ³ï¼š2æ¬¡å¤–å‡ºï¼Œå…¨éƒ¨å®‰å…¨æŠµé”</p>
                        <p>â€¢ é§•é§›è¡¨ç¾ï¼šæŒ‰é è¨­è·¯ç·šï¼Œç„¡åé›¢è¡Œç‚º</p>
                        <p>â€¢ æƒ…ç·’ç‹€æ…‹ï¼šæ•´é«”å¹³ç©©ï¼Œä¸‹åˆæœ‰è¼•å¾®ç„¦æ…®</p>
                        <p>â€¢ ç”Ÿç†ç‹€æ³ï¼šå„é …æŒ‡æ¨™æ­£å¸¸ï¼Œé£Ÿæ…¾è‰¯å¥½</p>
                        <p>â€¢ ç”¨è—¥æƒ…æ³ï¼šæŒ‰æ™‚æœè—¥ï¼Œç„¡ä¸è‰¯åæ‡‰</p>
                    </div>
                </div>
                <button onclick="shareReport()" class="w-full glass-button rounded-xl py-2 text-sm">
                    ğŸ“¤ åˆ†äº«ä»Šæ—¥å ±å‘Šçµ¦å®¶åº­æˆå“¡
                </button>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 glass-card rounded-t-3xl border-b-0 z-50">
        <div class="flex justify-around items-center py-2">
            <button onclick="navigateTo('dashboard')" class="nav-btn flex flex-col items-center gap-1 px-3 py-2 rounded-lg active" data-page="dashboard">
                <div class="text-lg">ğŸ </div>
                <span class="text-xs">ç¸½è¦½</span>
            </button>
            <button onclick="navigateTo('navigation')" class="nav-btn flex flex-col items-center gap-1 px-3 py-2 rounded-lg" data-page="navigation">
                <div class="text-lg">ğŸš—</div>
                <span class="text-xs">å°èˆª</span>
            </button>
            <button onclick="navigateTo('assistant')" class="nav-btn flex flex-col items-center gap-1 px-3 py-2 rounded-lg" data-page="assistant">
                <div class="text-lg">ğŸ¤–</div>
                <span class="text-xs">AIè«®è©¢</span>
            </button>
            <button onclick="navigateTo('monitoring')" class="nav-btn flex flex-col items-center gap-1 px-3 py-2 rounded-lg" data-page="monitoring">
                <div class="text-lg">ğŸ“Š</div>
                <span class="text-xs">ç›£æ¸¬</span>
            </button>
            <button onclick="navigateTo('resources')" class="nav-btn flex flex-col items-center gap-1 px-3 py-2 rounded-lg" data-page="resources">
                <div class="text-lg">ğŸ“‹</div>
                <span class="text-xs">è³‡æº</span>
            </button>
            <button onclick="navigateTo('family')" class="nav-btn flex flex-col items-center gap-1 px-3 py-2 rounded-lg" data-page="family">
                <div class="text-lg">ğŸ‘¥</div>
                <span class="text-xs">å®¶åº­</span>
            </button>
        </div>
    </nav>

    <!-- Modal for Material Details -->
    <div id="materialModal" class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
        <div class="glass-card rounded-2xl p-6 max-w-md w-full max-h-96 overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 id="modalTitle" class="text-lg font-semibold"></h3>
                <button onclick="closeModal()" class="glass-button rounded-full p-2 text-lg">âœ•</button>
            </div>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            updateDateTime();
            initializeBehaviorChart();
            setInterval(updateDateTime, 60000);
            
            // Simulate driving status update
            setTimeout(() => {
                simulateDrivingStatus();
            }, 5000);
        });

        // Navigation
        function navigateTo(page) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(page).classList.add('active');
            document.querySelector(`[data-page="${page}"]`).classList.add('active');
        }

        // Update date and time
        function updateDateTime() {
            const now = new Date();
            document.getElementById('currentTime').textContent = now.toLocaleTimeString('zh-TW', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            // Update timezone times
            const vancouverTime = new Intl.DateTimeFormat('zh-TW', {
                timeZone: 'America/Vancouver',
                hour: '2-digit',
                minute: '2-digit'
            }).format(now);
            
            if (document.getElementById('vancouverTime2')) {
                document.getElementById('vancouverTime2').textContent = vancouverTime;
            }
        }

        // Driving status simulation
        function simulateDrivingStatus() {
            // Randomly show driving alert
            if (Math.random() > 0.7) {
                document.getElementById('drivingAlert').classList.remove('hidden');
                updateDrivingStatus('driving');
            }
        }

        function updateDrivingStatus(status) {
            const statusElement = document.getElementById('currentDrivingStatus');
            
            if (status === 'driving') {
                statusElement.innerHTML = `
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center gap-3">
                            <div class="text-2xl">ğŸš—</div>
                            <div>
                                <h3 class="font-semibold">é§•é§›ä¸­</h3>
                                <p class="text-sm text-gray-600">å‰å¾€ç¾å»‰ç¤¾ - é è¨ˆ15åˆ†é˜</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-sm font-bold text-blue-700">ç§»å‹•ä¸­</div>
                            <div class="text-xs text-gray-500">${new Date().toLocaleTimeString('zh-TW', { hour: '2-digit', minute: '2-digit' })} æ›´æ–°</div>
                        </div>
                    </div>
                    <button onclick="showDrivingDetail()" class="glass-button rounded-lg px-3 py-1 text-xs">
                        ğŸ“ å³æ™‚ä½ç½®
                    </button>
                `;
                statusElement.className = 'p-4 warning-zone rounded-xl';
            }
        }

        // Navigation functions
        function showDrivingDetail() {
            alert('ğŸ“ å³æ™‚ä½ç½®è³‡è¨Šï¼š\n\nä½ç½®ï¼šå°åŒ—å¸‚å¤§å®‰å€å»ºåœ‹å—è·¯\nè·é›¢ç›®çš„åœ°ï¼š1.2å…¬é‡Œ\né è¨ˆæŠµé”ï¼š7åˆ†é˜\n\nç‹€æ…‹ï¼š\nâœ… æŒ‰é è¨­è·¯ç·šè¡Œé§›\nâœ… è»Šé€Ÿæ­£å¸¸\nâœ… ç„¡åé›¢è¡Œç‚º');
        }

        function addNewRoute() {
            const routeName = prompt('è«‹è¼¸å…¥è·¯ç·šåç¨±ï¼ˆä¾‹å¦‚ï¼šå…¨è¯ç¦åˆ©ä¸­å¿ƒï¼‰ï¼š');
            if (routeName) {
                alert(`æ–°è·¯ç·šã€Œ${routeName}ã€å·²æ·»åŠ ï¼\n\næ¥ä¸‹ä¾†è«‹ï¼š\n1. åœ¨æ‰‹æ©Ÿåœ°åœ–ä¸­è¨­å®šç›®çš„åœ°\n2. ç¢ºèªæœ€ä½³è·¯ç·š\n3. å„²å­˜ç‚ºé è¨­è·¯ç·š\n4. è¨­å®šCarPlayé¡¯ç¤ºé¸é …`);
            }
        }

        function editRoute(routeId) {
            const routes = {
                supermarket: 'ç¾å»‰ç¤¾ - å¤§å®‰åº—',
                clinic: 'æ—é†«å¸«è¨ºæ‰€',
                park: 'å¤§å®‰æ£®æ—å…¬åœ’'
            };
            
            alert(`ç·¨è¼¯è·¯ç·šï¼š${routes[routeId]}\n\nå¯ä¿®æ”¹é …ç›®ï¼š\nâ€¢ è·¯ç·šåç¨±\nâ€¢ ç›®çš„åœ°åœ°å€\nâ€¢ åå¥½è·¯å¾‘\nâ€¢ èªéŸ³æç¤ºè¨­å®š\nâ€¢ ç·Šæ€¥è¯çµ¡äººé€šçŸ¥`);
        }

        function activateRoute(routeId) {
            const routes = {
                supermarket: 'ç¾å»‰ç¤¾ - å¤§å®‰åº—',
                clinic: 'æ—é†«å¸«è¨ºæ‰€',
                park: 'å¤§å®‰æ£®æ—å…¬åœ’'
            };
            
            alert(`å·²å•Ÿç”¨è·¯ç·šï¼š${routes[routeId]}\n\nâœ… å·²åŒæ­¥åˆ°CarPlay\nâœ… èªéŸ³å°èˆªå·²æº–å‚™\nâœ… å®‰å…¨ç›£æ§å·²å•Ÿå‹•\n\nç‹çˆºçˆºä¸‹æ¬¡ä½¿ç”¨è»Šè¼›æ™‚ï¼Œæ­¤è·¯ç·šå°‡è‡ªå‹•é¡¯ç¤ºåœ¨ä¸»ç•«é¢ã€‚`);
        }

        function refreshLocation() {
            alert('ğŸ”„ æ­£åœ¨æ›´æ–°ä½ç½®...\n\nğŸ“ æœ€æ–°ä½ç½®ï¼šå°åŒ—å¸‚å¤§å®‰å€\nâ° æ›´æ–°æ™‚é–“ï¼š' + new Date().toLocaleTimeString('zh-TW') + '\nâœ… GPSä¿¡è™Ÿæ­£å¸¸');
        }

        function editSafeZone(zone) {
            const zones = {
                safe: 'å®‰å…¨å€åŸŸï¼ˆç¶ è‰²ï¼‰',
                warning: 'æ³¨æ„å€åŸŸï¼ˆé»ƒè‰²ï¼‰',
                danger: 'è­¦æˆ’å€åŸŸï¼ˆç´…è‰²ï¼‰'
            };
            
            alert(`ç·¨è¼¯ ${zones[zone]}ï¼š\n\nå¯èª¿æ•´é …ç›®ï¼š\nâ€¢ ç¯„åœå¤§å°\nâ€¢ é€šçŸ¥è¨­å®š\nâ€¢ ç·Šæ€¥è¯çµ¡äºº\nâ€¢ è‡ªå‹•å›å®¶æé†’æ™‚é–“`);
        }

        // AI Assistant Functions
        function askAIAssistant() {
            navigateTo('assistant');
        }

        function askQuestion(topic) {
            const questions = {
                driving: {
                    question: 'å¤±æ™ºæ‚£è€…é§•é§›å®‰å…¨è©•ä¼°',
                    answer: 'å¤±æ™ºç—‡æ‚£è€…é§•é§›å®‰å…¨è©•ä¼°è¦é»ï¼š\n\nğŸ” è©•ä¼°æŒ‡æ¨™ï¼š\nâ€¢ åæ‡‰æ™‚é–“å’Œæ³¨æ„åŠ›\nâ€¢ ç©ºé–“èªçŸ¥èƒ½åŠ›\nâ€¢ è¨˜æ†¶åŠ›å’Œåˆ¤æ–·åŠ›\nâ€¢ æ‰‹çœ¼å”èª¿èƒ½åŠ›\n\nâš ï¸ è­¦ç¤ºå¾µè±¡ï¼š\nâ€¢ è¿·è·¯æˆ–æ‰¾ä¸åˆ°ç†Ÿæ‚‰åœ°é»\nâ€¢ å¿˜è¨˜äº¤é€šè¦å‰‡\nâ€¢ åˆ¤æ–·è·é›¢å›°é›£\nâ€¢ å®¹æ˜“åˆ†å¿ƒæˆ–å›°æƒ‘\n\nğŸ“‹ å»ºè­°æªæ–½ï¼š\nâ€¢ å®šæœŸé†«å­¸è©•ä¼°\nâ€¢ ä½¿ç”¨è¼”åŠ©å°èˆªç³»çµ±\nâ€¢ é™åˆ¶é§•é§›ç¯„åœå’Œæ™‚é–“\nâ€¢ æº–å‚™æ›¿ä»£äº¤é€šæ–¹æ¡ˆ\n\né‡è¦ï¼šå®‰å…¨æ°¸é æ˜¯ç¬¬ä¸€è€ƒé‡ï¼Œå¿…è¦æ™‚æ‡‰è€ƒæ…®åœæ­¢é§•é§›ã€‚'
                },
                navigation: {
                    question: 'å°èˆªç³»çµ±è¨­ç½®å»ºè­°',
                    answer: 'å¤±æ™ºç—‡æ‚£è€…å°èˆªç³»çµ±è¨­ç½®å»ºè­°ï¼š\n\nğŸš— CarPlayè¨­å®šï¼š\nâ€¢ å•Ÿç”¨å¤§å­—é«”æ¨¡å¼\nâ€¢ ç°¡åŒ–ä»‹é¢é¡¯ç¤º\nâ€¢ é è¨­å¸¸ç”¨è·¯ç·š\nâ€¢ èªéŸ³æç¤ºæ¸…æ™°\n\nğŸ—ºï¸ è·¯ç·šç®¡ç†ï¼š\nâ€¢ è¨­å®šå›ºå®šè·¯ç·š\nâ€¢ é¿å…è¤‡é›œè·¯æ®µ\nâ€¢ æ¨™è¨˜é‡è¦åœ°æ¨™\nâ€¢ ç·Šæ€¥è¯çµ¡å¿«æ·éµ\n\nğŸ“± å®‰å…¨åŠŸèƒ½ï¼š\nâ€¢ GPSå³æ™‚è¿½è¹¤\nâ€¢ åé›¢è·¯ç·šè­¦å‘Š\nâ€¢ è‡ªå‹•å›å®¶æé†’\nâ€¢ å®¶äººå³æ™‚é€šçŸ¥\n\nğŸ’¡ ä½¿ç”¨æŠ€å·§ï¼š\nâ€¢ äº‹å…ˆç·´ç¿’ç†Ÿæ‚‰è·¯ç·š\nâ€¢ é¿é–‹å°–å³°æ™‚æ®µ\nâ€¢ ç¢ºä¿æ‰‹æ©Ÿå……é›»å……è¶³'
                },
                behavior: {
                    question: 'å¦‚ä½•æ‡‰å°é‡è¤‡æ€§è¡Œç‚ºï¼Ÿ',
                    answer: 'è™•ç†é‡è¤‡æ€§è¡Œç‚ºçš„ç­–ç•¥ï¼š\n\n1. ä¿æŒè€å¿ƒå’Œç†è§£ - é€™æ˜¯ç–¾ç—…çš„ç—‡ç‹€ï¼Œä¸æ˜¯æ•…æ„çš„\n2. è½‰ç§»æ³¨æ„åŠ› - æä¾›å…¶ä»–æ´»å‹•æˆ–è©±é¡Œ\n3. å»ºç«‹è¦å¾‹ - å›ºå®šçš„æ—¥ç¨‹å¯ä»¥æ¸›å°‘ç„¦æ…®\n4. æ‰¾å‡ºè§¸ç™¼å› ç´  - è§€å¯Ÿä»€éº¼æƒ…æ³ä¸‹å®¹æ˜“å‡ºç¾\n5. æä¾›å®‰å…¨çš„é‡è¤‡æ´»å‹• - å¦‚æŠ˜æ¯›å·¾ã€æ•´ç†ç‰©å“\n\nè¨˜ä½ï¼šå›æ‡‰æ™‚è¦æº«å’Œï¼Œé¿å…ç³¾æ­£æˆ–çˆ­è¾¯ã€‚'
                },
                communication: {
                    question: 'æœ‰æ•ˆæºé€šæŠ€å·§',
                    answer: 'èˆ‡å¤±æ™ºæ‚£è€…æºé€šçš„æŠ€å·§ï¼š\n\n1. æ”¾æ…¢èªé€Ÿï¼Œä½¿ç”¨ç°¡å–®å¥å­\n2. ä¿æŒçœ¼ç¥æ¥è§¸å’Œå‹å–„è¡¨æƒ…\n3. ä¸€æ¬¡åªèªªä¸€ä»¶äº‹æƒ…\n4. çµ¦äºˆå……è¶³çš„å›æ‡‰æ™‚é–“\n5. ä½¿ç”¨è‚¢é«”èªè¨€å’Œæ‰‹å‹¢è¼”åŠ©\n6. é¿å…çˆ­è¾¯æˆ–ç³¾æ­£éŒ¯èª¤\n7. é‡è¤‡é‡è¦è¨Šæ¯\n8. ä¿æŒç©æ¥µæ­£é¢çš„èªèª¿\n\né‡é»ï¼šå°ˆæ³¨æ–¼æƒ…æ„Ÿè€Œéäº‹å¯¦çš„æº–ç¢ºæ€§ã€‚'
                }
            };
            
            const qa = questions[topic];
            addAIMessage(qa.question, true);
            setTimeout(() => addAIMessage(qa.answer), 1000);
        }

        function sendAIMessage() {
            const input = document.getElementById('aiQuestion');
            const question = input.value.trim();
            
            if (!question) return;
            
            addAIMessage(question, true);
            input.value = '';
            
            // Simulate AI response
            setTimeout(() => {
                let response = '';
                if (question.includes('é§•é§›') || question.includes('é–‹è»Š')) {
                    response = 'é—œæ–¼é§•é§›å®‰å…¨ï¼Œæˆ‘å»ºè­°ï¼š\n\n1. å®šæœŸè©•ä¼°é§•é§›èƒ½åŠ›\n2. ä½¿ç”¨è¼”åŠ©å°èˆªç³»çµ±\n3. è¨­å®šå®‰å…¨å€åŸŸç›£æ§\n4. æº–å‚™ç·Šæ€¥è¯çµ¡æ–¹æ¡ˆ\n\næ‚¨éœ€è¦æ›´è©³ç´°çš„é§•é§›å®‰å…¨è©•ä¼°å»ºè­°å—ï¼Ÿ';
                } else if (question.includes('å°èˆª') || question.includes('CarPlay')) {
                    response = 'é—œæ–¼å°èˆªè¨­å®šï¼Œå»ºè­°æ‚¨ï¼š\n\nâ€¢ ç°¡åŒ–CarPlayä»‹é¢\nâ€¢ é è¨­å¸¸ç”¨è·¯ç·š\nâ€¢ é–‹å•ŸèªéŸ³å°èˆª\nâ€¢ è¨­å®šç·Šæ€¥è¯çµ¡æŒ‰éˆ•\n\néœ€è¦æˆ‘å¹«æ‚¨è¨­å®šå…·é«”çš„å°èˆªé¸é …å—ï¼Ÿ';
                } else {
                    response = 'æ„Ÿè¬æ‚¨çš„å•é¡Œã€‚æ ¹æ“šæ‚¨æè¿°çš„æƒ…æ³ï¼Œæˆ‘å»ºè­°æ‚¨å¯ä»¥å˜—è©¦ä»¥ä¸‹æ–¹æ³•ï¼š\n\n1. è§€å¯Ÿå…·é«”ç‹€æ³\n2. åˆ¶å®šæ‡‰å°ç­–ç•¥\n3. å°‹æ±‚å°ˆæ¥­å»ºè­°\n4. ä¿æŒè€å¿ƒç†è§£\n\nå¦‚éœ€æ›´è©³ç´°çš„å»ºè­°ï¼Œå»ºè­°è«®è©¢å°ˆæ¥­é†«ç™‚äººå“¡ã€‚';
                }
                addAIMessage(response);
            }, 2000);
        }

        function addAIMessage(message, isUser = false) {
            const chatMessages = document.getElementById('aiChatMessages');
            const messageDiv = document.createElement('div');
            
            if (isUser) {
                messageDiv.innerHTML = `
                    <div class="flex justify-end">
                        <div class="bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl px-3 py-2 max-w-xs">
                            <p class="text-sm">${message}</p>
                        </div>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="bg-white/50 rounded-xl p-3">
                        <p class="text-sm whitespace-pre-line">${message}</p>
                        <div class="text-xs text-gray-500 mt-1">å°é›¨ â€¢ AI åŠ©ç†</div>
                    </div>
                `;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Initialize behavior chart
        function initializeBehaviorChart() {
            const ctx = document.getElementById('behaviorChart').getContext('2d');
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['é€±ä¸€', 'é€±äºŒ', 'é€±ä¸‰', 'é€±å››', 'é€±äº”', 'é€±å…­', 'é€±æ—¥'],
                    datasets: [{
                        label: 'é§•é§›å®‰å…¨åˆ†æ•¸',
                        data: [95, 88, 92, 85, 98, 90, 93],
                        borderColor: 'rgba(59, 130, 246, 1)',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.4
                    }, {
                        label: 'æ´»å‹•åƒèˆ‡åº¦',
                        data: [85, 78, 82, 75, 88, 90, 85],
                        borderColor: 'rgba(139, 92, 246, 1)',
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
        }

        // Resource materials
        function showMaterial(type) {
            const materials = {
                'driving-assessment': {
                    title: 'é§•é§›èƒ½åŠ›è©•ä¼°è¡¨',
                    content: `
                        <div class="space-y-3">
                            <h4 class="font-medium">æ¯æœˆè©•ä¼°é …ç›®ï¼š</h4>
                            <div class="space-y-2 text-sm">
                                <label class="flex items-center gap-2">
                                    <input type="checkbox" class="rounded">
                                    <span>èƒ½æº–ç¢ºåˆ¤æ–·è·é›¢å’Œé€Ÿåº¦</span>
                                </label>
                                <label class="flex items-center gap-2">
                                    <input type="checkbox" class="rounded">
                                    <span>åæ‡‰æ™‚é–“æ­£å¸¸</span>
                                </label>
                                <label class="flex items-center gap-2">
                                    <input type="checkbox" class="rounded">
                                    <span>èƒ½æ‰¾åˆ°ç†Ÿæ‚‰åœ°é»</span>
                                </label>
                                <label class="flex items-center gap-2">
                                    <input type="checkbox" class="rounded">
                                    <span>éµå®ˆäº¤é€šè¦å‰‡</span>
                                </label>
                                <label class="flex items-center gap-2">
                                    <input type="checkbox" class="rounded">
                                    <span>èƒ½å°ˆæ³¨é§•é§›ä¸åˆ†å¿ƒ</span>
                                </label>
                            </div>
                            <p class="text-xs text-gray-600 mt-3">ğŸ’¡ å¦‚æœ‰3é …ä»¥ä¸Šæœªé”æ¨™ï¼Œå»ºè­°è«®è©¢é†«å¸«</p>
                        </div>
                    `
                },
                'car-preparation': {
                    title: 'è»Šè¼›æº–å‚™æ¸…å–®',
                    content: `
                        <div class="space-y-3">
                            <h4 class="font-medium">å¤–å‡ºå‰æª¢æŸ¥ï¼š</h4>
                            <div class="space-y-2 text-sm">
                                <label class="flex items-center gap-2">
                                    <input type="checkbox" class="rounded">
                                    <span>æ‰‹æ©Ÿå……é›»å……è¶³</span>
                                </label>
                                <label class="flex items-center gap-2">
                                    <input type="checkbox" class="rounded">
                                    <span>GPSå°èˆªå·²è¨­å®š</span>
                                </label>
                                <label class="flex items-center gap-2">
                                    <input type="checkbox" class="rounded">
                                    <span>ç·Šæ€¥è¯çµ¡äººå·²é€šçŸ¥</span>
                                </label>
                                <label class="flex items-center gap-2">
                                    <input type="checkbox" class="rounded">
                                    <span>è—¥ç‰©å·²æ”œå¸¶</span>
                                </label>
                                <label class="flex items-center gap-2">
                                    <input type="checkbox" class="rounded">
                                    <span>èº«åˆ†è­‰ä»¶å·²å‚™é½Š</span>
                                </label>
                            </div>
                        </div>
                    `
                },
                'emergency-kit': {
                    title: 'è»Šç”¨ç·Šæ€¥åŒ…',
                    content: `
                        <div class="space-y-3">
                            <h4 class="font-medium">å¿…å‚™ç‰©å“ï¼š</h4>
                            <div class="space-y-2 text-sm">
                                <div class="p-2 bg-white/20 rounded">ğŸ“± é¡å¤–æ‰‹æ©Ÿå……é›»å™¨</div>
                                <div class="p-2 bg-white/20 rounded">ğŸ’Š å¸¸ç”¨è—¥ç‰©</div>
                                <div class="p-2 bg-white/20 rounded">ğŸ’³ ç·Šæ€¥è¯çµ¡å¡</div>
                                <div class="p-2 bg-white/20 rounded">ğŸ’° é›¶éŒ¢ç¾é‡‘</div>
                                <div class="p-2 bg-white/20 rounded">ğŸ« ç·Šæ€¥é£Ÿç‰©</div>
                                <div class="p-2 bg-white/20 rounded">ğŸ’§ ç“¶è£æ°´</div>
                            </div>
                            <p class="text-xs text-gray-600 mt-3">ğŸ”„ æ¯æœˆæª¢æŸ¥æ›´æ–°</p>
                        </div>
                    `
                }
            };
            
            const material = materials[type];
            document.getElementById('modalTitle').textContent = material.title;
            document.getElementById('modalContent').innerHTML = material.content;
            document.getElementById('materialModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('materialModal').classList.add('hidden');
        }

        // Emergency and communication functions
        function emergencyCall(type) {
            const contacts = {
                doctor: 'æ­£åœ¨æ’¥æ‰“çµ¦æ—é†«å¸« (02) 2345-6789...',
                police: 'æ­£åœ¨æ’¥æ‰“å¤§å®‰åˆ†å±€ (02) 2700-4500...',
                roadside: 'æ­£åœ¨æ’¥æ‰“é“è·¯æ•‘æ´ 0800-123-456...',
                emergency: 'æ­£åœ¨æ’¥æ‰“ 119 ç·Šæ€¥æ•‘è­·å°ˆç·š...'
            };
            
            alert(contacts[type]);
        }

        function sendUpdate(person) {
            alert(`å·²ç™¼é€ä»Šæ—¥ç…§è­·æ›´æ–°çµ¦ David Wangï¼ŒåŒ…å«ï¼š\n\nâ€¢ å¤–å‡ºå®‰å…¨è¨˜éŒ„\nâ€¢ é§•é§›è¡Œç‚ºåˆ†æ\nâ€¢ å¥åº·ç‹€æ³æ‘˜è¦\nâ€¢ ç”¨è—¥æƒ…æ³\nâ€¢ ç·Šæ€¥è¯çµ¡è³‡è¨Š`);
        }

        function shareReport() {
            alert('ä»Šæ—¥ç…§è­·å ±å‘Šå·²åˆ†äº«çµ¦æ‰€æœ‰å®¶åº­æˆå“¡ï¼\n\nå…§å®¹åŒ…å«ï¼š\nâ€¢ å¤–å‡ºé§•é§›å®‰å…¨è¨˜éŒ„\nâ€¢ å¥åº·ç›£æ¸¬æ•¸æ“š\nâ€¢ è¡Œç‚ºæ¨¡å¼åˆ†æ\nâ€¢ ç·Šæ€¥äº‹ä»¶è¨˜éŒ„\nâ€¢ æ˜æ—¥è¡Œç¨‹è¦åŠƒ');
        }

        function showAlertDetail(type) {
            if (type === 'anxiety') {
                alert('ç„¦æ…®ç‹€æ³è©³æƒ…ï¼š\n\næ™‚é–“ï¼šä»Šå¤© 14:30\nç—‡ç‹€ï¼šé‡è¤‡è©¢å•èˆŠç…§ç‰‡ä½ç½®\næŒçºŒæ™‚é–“ï¼šç´„20åˆ†é˜\nè™•ç†æ–¹å¼ï¼šé™ªåŒå°‹æ‰¾ï¼Œè½‰ç§»æ³¨æ„åŠ›\n\nå»ºè­°ï¼š\nâ€¢ æº–å‚™æ›¿ä»£æ´»å‹•\nâ€¢ è§€å¯Ÿé¡ä¼¼è§¸ç™¼å› ç´ \nâ€¢ å¿…è¦æ™‚è«®è©¢é†«ç™‚äººå“¡');
            }
        }

        function dismissAlert(type) {
            document.getElementById('alertsContainer').innerHTML = '<p class="text-sm text-gray-600 text-center py-4">ç›®å‰æ²’æœ‰éœ€è¦é—œæ³¨çš„è­¦ç¤º</p>';
        }
    </script>
</body>
</html>