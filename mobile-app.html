<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PoignÃ©e ä¼´é˜® - è¡Œå‹•ç‰ˆæ‡‰ç”¨</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Noto Sans TC', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #fef7ff 0%, #fdf2f8 25%, #eff6ff 75%, #f0f9ff 100%);
            overscroll-behavior: none;
        }
        .glass-card {
            backdrop-filter: blur(16px);
            background: rgba(255, 255, 255, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        .glass-button {
            backdrop-filter: blur(16px);
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        .glass-button:hover, .glass-button:active {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(0.95);
        }
        .glass-button.active {
            background: rgba(147, 51, 234, 0.3);
            border-color: rgba(147, 51, 234, 0.5);
        }
        .gradient-text {
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
        .recording {
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .message {
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .floating-bg {
            position: fixed;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            mix-blend-mode: multiply;
            filter: blur(40px);
            opacity: 0.2;
            animation: float 8s ease-in-out infinite;
            pointer-events: none;
        }
        .floating-bg:nth-child(1) {
            background: #a855f7;
            top: 2rem;
            left: 1rem;
        }
        .floating-bg:nth-child(2) {
            background: #ec4899;
            top: 8rem;
            right: 1rem;
            animation-delay: 2s;
        }
        .floating-bg:nth-child(3) {
            background: #3b82f6;
            bottom: 8rem;
            left: 50%;
            transform: translateX(-50%);
            animation-delay: 4s;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px) translateX(0px); }
            50% { transform: translateY(-15px) translateX(8px); }
        }
    </style>
</head>
<body class="min-h-screen pb-20">
    <!-- Floating Background Elements -->
    <div class="floating-bg"></div>
    <div class="floating-bg"></div>
    <div class="floating-bg"></div>

    <!-- Main Container -->
    <div class="relative z-10">
        
        <!-- Dashboard Page -->
        <div id="dashboard" class="page active p-4 space-y-4">
            <!-- Header -->
            <div class="glass-card rounded-2xl p-4">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-xl font-bold gradient-text">æ—©å®‰ï¼Œç‹çˆºçˆºï¼</h1>
                        <p class="text-sm text-gray-600" id="currentDate"></p>
                    </div>
                    <div class="text-2xl">â˜€ï¸</div>
                </div>
            </div>

            <!-- Today's Summary -->
            <div class="grid grid-cols-3 gap-3">
                <div class="glass-card rounded-xl p-3 text-center">
                    <div class="text-2xl mb-1">ğŸ’¬</div>
                    <div class="text-lg font-bold" id="todayConversations">3</div>
                    <div class="text-xs text-gray-600">ä»Šæ—¥å°è©±</div>
                </div>
                <div class="glass-card rounded-xl p-3 text-center">
                    <div class="text-2xl mb-1">ğŸ“–</div>
                    <div class="text-lg font-bold" id="todayMemories">1</div>
                    <div class="text-xs text-gray-600">è¨˜éŒ„å›æ†¶</div>
                </div>
                <div class="glass-card rounded-xl p-3 text-center">
                    <div class="text-2xl mb-1">ğŸ˜Š</div>
                    <div class="text-sm font-bold">é–‹å¿ƒ</div>
                    <div class="text-xs text-gray-600">æ•´é«”å¿ƒæƒ…</div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">å¿«é€Ÿé–‹å§‹</h2>
                <div class="grid grid-cols-2 gap-3">
                    <button onclick="navigateTo('companion')" class="glass-button rounded-xl p-4 text-center">
                        <div class="text-3xl mb-2">ğŸ¤–</div>
                        <div class="text-sm font-medium">èˆ‡å°é›¨èŠå¤©</div>
                    </button>
                    <button onclick="navigateTo('memories')" class="glass-button rounded-xl p-4 text-center">
                        <div class="text-3xl mb-2">ğŸ“–</div>
                        <div class="text-sm font-medium">è¨˜éŒ„å›æ†¶</div>
                    </button>
                    <button onclick="navigateTo('family')" class="glass-button rounded-xl p-4 text-center">
                        <div class="text-3xl mb-2">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
                        <div class="text-sm font-medium">è¯ç¹«å®¶äºº</div>
                    </button>
                    <button onclick="navigateTo('culture')" class="glass-button rounded-xl p-4 text-center">
                        <div class="text-3xl mb-2">ğŸ®</div>
                        <div class="text-sm font-medium">æ–‡åŒ–å¯¶åº«</div>
                    </button>
                </div>
            </div>

            <!-- Reminders -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">ä»Šæ—¥æé†’</h2>
                <div class="space-y-2">
                    <div class="flex items-center gap-3 p-2 bg-white/20 rounded-lg">
                        <input type="checkbox" class="w-4 h-4" onchange="toggleReminder(this)">
                        <div class="flex-1">
                            <div class="text-sm font-medium">è¨˜å¾—åƒè—¥</div>
                            <div class="text-xs text-gray-600">09:00</div>
                        </div>
                    </div>
                    <div class="flex items-center gap-3 p-2 bg-white/20 rounded-lg">
                        <input type="checkbox" class="w-4 h-4" onchange="toggleReminder(this)">
                        <div class="flex-1">
                            <div class="text-sm font-medium">ä¸‹åˆæ•£æ­¥</div>
                            <div class="text-xs text-gray-600">15:00</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Companion Page -->
        <div id="companion" class="page p-4 space-y-4">
            <!-- Header -->
            <div class="glass-card rounded-2xl p-4">
                <div class="flex items-center gap-3">
                    <div class="text-3xl">ğŸ¤–</div>
                    <div>
                        <h1 class="text-xl font-bold gradient-text">AI é™ªä¼´ - å°é›¨</h1>
                        <p class="text-sm text-gray-600">æˆ‘åœ¨é€™è£¡é™ªæ‚¨èŠå¤©</p>
                    </div>
                </div>
            </div>

            <!-- Emotional Support Activities -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">æƒ…ç·’æ”¯æŒæ´»å‹•</h2>
                <div class="grid grid-cols-2 gap-2">
                    <button onclick="startActivity('music')" class="glass-button rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">ğŸµ</div>
                        <div class="text-xs">è½æ‡·èˆŠéŸ³æ¨‚</div>
                    </button>
                    <button onclick="startActivity('photos')" class="glass-button rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">ğŸ“·</div>
                        <div class="text-xs">çœ‹ç…§ç‰‡</div>
                    </button>
                    <button onclick="startActivity('stories')" class="glass-button rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">ğŸ“š</div>
                        <div class="text-xs">èŠç¯€æ…¶æ•…äº‹</div>
                    </button>
                    <button onclick="startActivity('meditation')" class="glass-button rounded-xl p-3 text-center">
                        <div class="text-2xl mb-1">ğŸ§˜</div>
                        <div class="text-xs">å¿ƒéˆå¯§éœ</div>
                    </button>
                </div>
            </div>

            <!-- Chat Messages -->
            <div class="glass-card rounded-2xl p-4 h-64 overflow-y-auto" id="chatMessages">
                <div class="message mb-3">
                    <div class="bg-white/50 rounded-xl p-3 mb-1">
                        <p class="text-sm">æ‚¨å¥½ï¼æˆ‘æ˜¯å°é›¨ï¼Œå¾ˆé«˜èˆˆèƒ½é™ªæ‚¨èŠå¤©ã€‚ä»Šå¤©éå¾—æ€éº¼æ¨£å‘¢ï¼Ÿ</p>
                    </div>
                    <div class="text-xs text-gray-500">å°é›¨ â€¢ å‰›å‰›</div>
                </div>
            </div>

            <!-- Voice Input -->
            <div class="glass-card rounded-2xl p-4">
                <div class="flex items-center gap-3">
                    <button id="recordBtn" onclick="toggleRecording()" class="glass-button rounded-full p-4">
                        <div class="text-2xl">ğŸ¤</div>
                    </button>
                    <input type="text" id="textInput" placeholder="è¼¸å…¥è¨Šæ¯æˆ–é»æ“Šéº¥å…‹é¢¨èªªè©±..." class="flex-1 glass-button rounded-xl px-4 py-2 text-sm">
                    <button onclick="sendMessage()" class="glass-button rounded-full p-3">
                        <div class="text-lg">ğŸ“¤</div>
                    </button>
                </div>
                <div id="recordingStatus" class="text-xs text-gray-600 mt-2 hidden">æ­£åœ¨éŒ„éŸ³ä¸­...</div>
            </div>
        </div>

        <!-- Memory Journal Page -->
        <div id="memories" class="page p-4 space-y-4">
            <!-- Header -->
            <div class="glass-card rounded-2xl p-4">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-xl font-bold gradient-text">è¨˜æ†¶æ—¥è¨˜</h1>
                        <p class="text-sm text-gray-600">è¨˜éŒ„ç”Ÿæ´»ä¸­çš„ç¾å¥½æ™‚åˆ»</p>
                    </div>
                    <button onclick="showAddMemoryForm()" class="glass-button rounded-full p-2">
                        <div class="text-xl">â•</div>
                    </button>
                </div>
            </div>

            <!-- Add Memory Form -->
            <div id="addMemoryForm" class="glass-card rounded-2xl p-4 hidden">
                <h2 class="text-lg font-semibold mb-3">æ–°å¢å›æ†¶</h2>
                <div class="space-y-3">
                    <input type="text" id="memoryTitle" placeholder="è¨˜æ†¶æ¨™é¡Œ..." class="w-full glass-button rounded-xl px-4 py-2 text-sm">
                    <textarea id="memoryContent" placeholder="æè¿°é€™å€‹ç¾å¥½çš„å›æ†¶..." class="w-full glass-button rounded-xl px-4 py-2 text-sm h-20 resize-none"></textarea>
                    <select id="memoryType" class="w-full glass-button rounded-xl px-4 py-2 text-sm">
                        <option value="daily_life">ğŸ“… æ—¥å¸¸ç”Ÿæ´»</option>
                        <option value="family">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶åº­æ™‚å…‰</option>
                        <option value="travel">âœˆï¸ æ—…è¡Œå›æ†¶</option>
                        <option value="food">ğŸ½ï¸ ç¾é£Ÿè¨˜æ†¶</option>
                        <option value="festival">ğŸ‰ ç¯€æ…¶æ´»å‹•</option>
                        <option value="childhood">ğŸ‘¶ ç«¥å¹´å¾€äº‹</option>
                    </select>
                    <select id="memoryMood" class="w-full glass-button rounded-xl px-4 py-2 text-sm">
                        <option value="happy">ğŸ˜Š é–‹å¿ƒ</option>
                        <option value="nostalgic">ğŸ¥º æ‡·å¿µ</option>
                        <option value="peaceful">ğŸ˜Œ å¹³éœ</option>
                        <option value="excited">ğŸ¤— èˆˆå¥®</option>
                        <option value="grateful">ğŸ™ æ„Ÿæ©</option>
                        <option value="proud">ğŸ’ª é©•å‚²</option>
                    </select>
                    <div class="flex gap-2">
                        <button onclick="saveMemory()" class="flex-1 glass-button rounded-xl py-2 text-sm font-medium bg-purple-500/30">
                            å„²å­˜å›æ†¶
                        </button>
                        <button onclick="hideAddMemoryForm()" class="flex-1 glass-button rounded-xl py-2 text-sm">
                            å–æ¶ˆ
                        </button>
                    </div>
                </div>
            </div>

            <!-- Memory List -->
            <div id="memoryList">
                <div class="glass-card rounded-2xl p-4 mb-3">
                    <div class="flex items-start gap-3">
                        <div class="text-2xl">ğŸ‰</div>
                        <div class="flex-1">
                            <h3 class="font-semibold mb-1">ä¸­ç§‹ç¯€å®¶æ—èšé¤</h3>
                            <p class="text-sm text-gray-700 mb-2">æ˜¨å¤©æ˜¯ä¸­ç§‹ç¯€ï¼Œå…¨å®¶äººèšåœ¨ä¸€èµ·åƒæœˆé¤…ã€è³æœˆã€‚å­«å­å€‘å¾ˆé–‹å¿ƒ...</p>
                            <div class="flex items-center gap-2 text-xs text-gray-500">
                                <span>ğŸ˜Š é–‹å¿ƒ</span>
                                <span>â€¢</span>
                                <span>2 å¤©å‰</span>
                                <span>â€¢</span>
                                <span class="text-green-600">å·²åˆ†äº«</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Family Connection Page -->
        <div id="family" class="page p-4 space-y-4">
            <!-- Header -->
            <div class="glass-card rounded-2xl p-4">
                <h1 class="text-xl font-bold gradient-text mb-2">å®¶äººé€£çµ</h1>
                <p class="text-sm text-gray-600">èˆ‡å®¶äººä¿æŒè¯ç¹«ï¼Œåˆ†äº«è¿‘æ³</p>
            </div>

            <!-- Daily Summary -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">ä»Šæ—¥æ‘˜è¦</h2>
                <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-3 mb-3">
                    <div class="grid grid-cols-3 gap-2 mb-3 text-center">
                        <div>
                            <div class="text-lg font-bold">5</div>
                            <div class="text-xs text-gray-600">å°è©±æ¬¡æ•¸</div>
                        </div>
                        <div>
                            <div class="text-lg font-bold">é–‹å¿ƒ</div>
                            <div class="text-xs text-gray-600">æ•´é«”å¿ƒæƒ…</div>
                        </div>
                        <div>
                            <div class="text-lg font-bold">2</div>
                            <div class="text-xs text-gray-600">è¨˜éŒ„å›æ†¶</div>
                        </div>
                    </div>
                    <div class="text-sm">
                        <strong>ä»Šæ—¥äº®é»ï¼š</strong>èˆ‡å°é›¨èŠäº†ç«¥å¹´å›æ†¶ï¼Œåˆ†äº«äº†ä¸­ç§‹ç¯€çš„ç¾å¥½æ™‚å…‰
                    </div>
                </div>
                <button onclick="shareDailySummary()" class="w-full glass-button rounded-xl py-2 text-sm">
                    ğŸ“¤ åˆ†äº«ä»Šæ—¥æ‘˜è¦çµ¦å®¶äºº
                </button>
            </div>

            <!-- Family Members -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">å®¶åº­æˆå“¡</h2>
                <div class="space-y-3">
                    <div class="bg-white/20 rounded-xl p-3">
                        <div class="flex justify-between items-start mb-2">
                            <div>
                                <h3 class="font-semibold">David Wang</h3>
                                <p class="text-sm text-gray-600">å…’å­</p>
                            </div>
                            <div class="text-right">
                                <div class="text-sm text-gray-500">æº«å“¥è¯</div>
                                <div class="font-semibold" id="vancouverTime">08:30</div>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <button class="glass-button rounded-lg px-3 py-1 text-xs">ğŸ“ é›»è©±</button>
                            <button class="glass-button rounded-lg px-3 py-1 text-xs">ğŸ“§ éƒµä»¶</button>
                            <button class="glass-button rounded-lg px-3 py-1 text-xs">ğŸ’¬ è¨Šæ¯</button>
                        </div>
                    </div>
                    <div class="bg-white/20 rounded-xl p-3">
                        <div class="flex justify-between items-start mb-2">
                            <div>
                                <h3 class="font-semibold">ç‹ç¾ç²</h3>
                                <p class="text-sm text-gray-600">å¥³å…’</p>
                            </div>
                            <div class="text-right">
                                <div class="text-sm text-gray-500">å°åŒ—</div>
                                <div class="font-semibold" id="taipeiTime">21:30</div>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <button class="glass-button rounded-lg px-3 py-1 text-xs">ğŸ“ é›»è©±</button>
                            <button class="glass-button rounded-lg px-3 py-1 text-xs">ğŸ“§ éƒµä»¶</button>
                            <button class="glass-button rounded-lg px-3 py-1 text-xs">ğŸ’¬ LINE</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cultural Content Page -->
        <div id="culture" class="page p-4 space-y-4">
            <!-- Header -->
            <div class="glass-card rounded-2xl p-4">
                <h1 class="text-xl font-bold gradient-text mb-2">æ–‡åŒ–å¯¶åº«</h1>
                <p class="text-sm text-gray-600">æ¢ç´¢æ–‡åŒ–è¨˜æ†¶ï¼Œå–šé†’ç¾å¥½å›æ†¶</p>
            </div>

            <!-- Category Filter -->
            <div class="flex gap-2 overflow-x-auto pb-2">
                <button onclick="filterCulture('all')" class="glass-button active rounded-xl px-4 py-2 text-sm whitespace-nowrap" data-category="all">
                    ğŸ“š å…¨éƒ¨
                </button>
                <button onclick="filterCulture('festival')" class="glass-button rounded-xl px-4 py-2 text-sm whitespace-nowrap" data-category="festival">
                    ğŸ‰ ç¯€æ…¶
                </button>
                <button onclick="filterCulture('music')" class="glass-button rounded-xl px-4 py-2 text-sm whitespace-nowrap" data-category="music">
                    ğŸµ éŸ³æ¨‚
                </button>
                <button onclick="filterCulture('story')" class="glass-button rounded-xl px-4 py-2 text-sm whitespace-nowrap" data-category="story">
                    ğŸ“– æ•…äº‹
                </button>
            </div>

            <!-- Cultural Content -->
            <div id="culturalContent">
                <div class="glass-card rounded-2xl p-4 mb-3 cultural-item" data-category="festival">
                    <div class="flex items-start gap-3">
                        <div class="text-3xl">ğŸ‰</div>
                        <div class="flex-1">
                            <h3 class="font-semibold mb-1">æ˜¥ç¯€</h3>
                            <p class="text-sm text-gray-700 mb-2">è¾²æ›†æ–°å¹´ï¼Œæ˜¯è¯äººæœ€é‡è¦çš„å‚³çµ±ç¯€æ—¥...</p>
                            <div class="flex gap-2 flex-wrap mb-2">
                                <span class="text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded-full">è²¼æ˜¥è¯</span>
                                <span class="text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded-full">åŒ…é¤ƒå­</span>
                                <span class="text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded-full">ç™¼ç´…åŒ…</span>
                            </div>
                            <button onclick="startCulturalChat('æ˜¥ç¯€')" class="glass-button rounded-lg px-3 py-1 text-xs">
                                ğŸ’¬ é–‹å§‹èŠèŠé€™å€‹è©±é¡Œ
                            </button>
                        </div>
                    </div>
                </div>

                <div class="glass-card rounded-2xl p-4 mb-3 cultural-item" data-category="music">
                    <div class="flex items-start gap-3">
                        <div class="text-3xl">ğŸµ</div>
                        <div class="flex-1">
                            <h3 class="font-semibold mb-1">å°èªè€æ­Œ</h3>
                            <p class="text-sm text-gray-700 mb-2">ç¶“å…¸çš„å°èªæ­Œæ›²ï¼Œæ‰¿è¼‰è‘—è¨±å¤šäººçš„é’æ˜¥å›æ†¶...</p>
                            <div class="flex gap-2 flex-wrap mb-2">
                                <span class="text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full">æœ›æ˜¥é¢¨</span>
                                <span class="text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full">é›¨å¤œèŠ±</span>
                                <span class="text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full">æœˆå¤œæ„</span>
                            </div>
                            <button onclick="startCulturalChat('å°èªè€æ­Œ')" class="glass-button rounded-lg px-3 py-1 text-xs">
                                ğŸ’¬ é–‹å§‹èŠèŠé€™å€‹è©±é¡Œ
                            </button>
                        </div>
                    </div>
                </div>

                <div class="glass-card rounded-2xl p-4 mb-3 cultural-item" data-category="story">
                    <div class="flex items-start gap-3">
                        <div class="text-3xl">ğŸ“š</div>
                        <div class="flex-1">
                            <h3 class="font-semibold mb-1">å°ç£æ°‘é–“æ•…äº‹</h3>
                            <p class="text-sm text-gray-700 mb-2">æµå‚³åœ¨å°ç£çš„å‚³çµ±æ°‘é–“æ•…äº‹ï¼Œå¯Œå«æ–‡åŒ–æ™ºæ…§...</p>
                            <div class="flex gap-2 flex-wrap mb-2">
                                <span class="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full">è™å§‘å©†</span>
                                <span class="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full">ç™½è›‡å‚³</span>
                                <span class="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full">å»–æ·»ä¸å‚³å¥‡</span>
                            </div>
                            <button onclick="startCulturalChat('å°ç£æ°‘é–“æ•…äº‹')" class="glass-button rounded-lg px-3 py-1 text-xs">
                                ğŸ’¬ é–‹å§‹èŠèŠé€™å€‹è©±é¡Œ
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Emotion Tracking Page -->
        <div id="emotions" class="page p-4 space-y-4">
            <!-- Header -->
            <div class="glass-card rounded-2xl p-4">
                <h1 class="text-xl font-bold gradient-text mb-2">æƒ…ç·’è¿½è¹¤</h1>
                <p class="text-sm text-gray-600">äº†è§£æƒ…ç·’è®ŠåŒ–ï¼Œä¿ƒé€²å¿ƒç†å¥åº·</p>
            </div>

            <!-- Key Metrics -->
            <div class="grid grid-cols-2 gap-3">
                <div class="glass-card rounded-xl p-3 text-center">
                    <div class="text-2xl mb-1">ğŸ˜Š</div>
                    <div class="text-sm font-bold">é–‹å¿ƒ</div>
                    <div class="text-xs text-gray-600">æœ€å¸¸è¦‹æƒ…ç·’</div>
                </div>
                <div class="glass-card rounded-xl p-3 text-center">
                    <div class="text-2xl mb-1">ğŸ“ˆ</div>
                    <div class="text-sm font-bold">+15%</div>
                    <div class="text-xs text-gray-600">æœ¬é€±æ”¹å–„</div>
                </div>
            </div>

            <!-- Weekly Trend -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">æœ¬é€±å¿ƒæƒ…è¶¨å‹¢</h2>
                <canvas id="emotionChart" width="400" height="200"></canvas>
            </div>

            <!-- Emotion Distribution -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">æƒ…ç·’åˆ†å¸ƒ</h2>
                <div class="space-y-2">
                    <div class="flex items-center gap-3">
                        <span class="text-xl">ğŸ˜Š</span>
                        <span class="text-sm w-12">é–‹å¿ƒ</span>
                        <div class="flex-1 bg-gray-200 rounded-full h-6 overflow-hidden">
                            <div class="h-full bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-end pr-2" style="width: 34%">
                                <span class="text-white text-xs font-semibold">34%</span>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center gap-3">
                        <span class="text-xl">ğŸ˜Œ</span>
                        <span class="text-sm w-12">å¹³éœ</span>
                        <div class="flex-1 bg-gray-200 rounded-full h-6 overflow-hidden">
                            <div class="h-full bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-end pr-2" style="width: 23%">
                                <span class="text-white text-xs font-semibold">23%</span>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center gap-3">
                        <span class="text-xl">ğŸ¥º</span>
                        <span class="text-sm w-12">æ‡·èˆŠ</span>
                        <div class="flex-1 bg-gray-200 rounded-full h-6 overflow-hidden">
                            <div class="h-full bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-end pr-2" style="width: 17%">
                                <span class="text-white text-xs font-semibold">17%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Insights -->
            <div class="glass-card rounded-2xl p-4">
                <h2 class="text-lg font-semibold mb-3">æ´å¯Ÿèˆ‡å»ºè­°</h2>
                <div class="space-y-2 text-sm">
                    <div class="flex items-start gap-2">
                        <span class="text-green-500">â€¢</span>
                        <span>æ‚¨æœ¬é€±çš„æ•´é«”æƒ…ç·’ç‹€æ…‹è‰¯å¥½</span>
                    </div>
                    <div class="flex items-start gap-2">
                        <span class="text-green-500">â€¢</span>
                        <span>å»ºè­°ç¹¼çºŒä¿æŒè¦å¾‹çš„å°è©±ç¿’æ…£</span>
                    </div>
                    <div class="flex items-start gap-2">
                        <span class="text-green-500">â€¢</span>
                        <span>æ‡·èˆŠæƒ…ç·’æœ‰åŠ©æ–¼è¨˜æ†¶å›é¡§</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 glass-card rounded-t-3xl border-b-0 z-50">
        <div class="flex justify-around items-center py-2">
            <button onclick="navigateTo('dashboard')" class="nav-btn flex flex-col items-center gap-1 px-3 py-2 rounded-lg" data-page="dashboard">
                <div class="text-lg">ğŸ </div>
                <span class="text-xs">é¦–é </span>
            </button>
            <button onclick="navigateTo('companion')" class="nav-btn flex flex-col items-center gap-1 px-3 py-2 rounded-lg" data-page="companion">
                <div class="text-lg">ğŸ¤–</div>
                <span class="text-xs">AIé™ªä¼´</span>
            </button>
            <button onclick="navigateTo('memories')" class="nav-btn flex flex-col items-center gap-1 px-3 py-2 rounded-lg" data-page="memories">
                <div class="text-lg">ğŸ“–</div>
                <span class="text-xs">è¨˜æ†¶</span>
            </button>
            <button onclick="navigateTo('family')" class="nav-btn flex flex-col items-center gap-1 px-3 py-2 rounded-lg" data-page="family">
                <div class="text-lg">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
                <span class="text-xs">å®¶äºº</span>
            </button>
            <button onclick="navigateTo('culture')" class="nav-btn flex flex-col items-center gap-1 px-3 py-2 rounded-lg" data-page="culture">
                <div class="text-lg">ğŸ®</div>
                <span class="text-xs">æ–‡åŒ–</span>
            </button>
            <button onclick="navigateTo('emotions')" class="nav-btn flex flex-col items-center gap-1 px-3 py-2 rounded-lg" data-page="emotions">
                <div class="text-lg">ğŸ“Š</div>
                <span class="text-xs">æƒ…ç·’</span>
            </button>
        </div>
    </nav>

    <script>
        // Global state
        let isRecording = false;
        let conversations = [];
        let memories = [
            {
                id: 1,
                title: 'ä¸­ç§‹ç¯€å®¶æ—èšé¤',
                content: 'æ˜¨å¤©æ˜¯ä¸­ç§‹ç¯€ï¼Œå…¨å®¶äººèšåœ¨ä¸€èµ·åƒæœˆé¤…ã€è³æœˆã€‚å­«å­å€‘å¾ˆé–‹å¿ƒï¼Œæˆ‘å€‘ä¸€èµ·å”±æ­Œã€èŠå¤©åˆ°å¾ˆæ™šã€‚',
                type: 'festival',
                mood: 'happy',
                date: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000),
                shared: true
            }
        ];

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            updateDateTime();
            initializeEmotionChart();
            updateCounts();
            setInterval(updateDateTime, 60000); // Update every minute
        });

        // Navigation
        function navigateTo(page) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            
            // Show selected page
            document.getElementById(page).classList.add('active');
            document.querySelector(`[data-page="${page}"]`).classList.add('active');
        }

        // Update date and time
        function updateDateTime() {
            const now = new Date();
            const options = { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                weekday: 'long'
            };
            document.getElementById('currentDate').textContent = now.toLocaleDateString('zh-TW', options);
            
            // Update timezone times
            const vancouverTime = new Intl.DateTimeFormat('zh-TW', {
                timeZone: 'America/Vancouver',
                hour: '2-digit',
                minute: '2-digit'
            }).format(now);
            
            const taipeiTime = new Intl.DateTimeFormat('zh-TW', {
                timeZone: 'Asia/Taipei',
                hour: '2-digit',
                minute: '2-digit'
            }).format(now);
            
            if (document.getElementById('vancouverTime')) {
                document.getElementById('vancouverTime').textContent = vancouverTime;
            }
            if (document.getElementById('taipeiTime')) {
                document.getElementById('taipeiTime').textContent = taipeiTime;
            }
        }

        // Update counts
        function updateCounts() {
            document.getElementById('todayConversations').textContent = conversations.length;
            document.getElementById('todayMemories').textContent = memories.filter(m => {
                const today = new Date();
                const memoryDate = new Date(m.date);
                return memoryDate.toDateString() === today.toDateString();
            }).length;
        }

        // Toggle reminder
        function toggleReminder(checkbox) {
            if (checkbox.checked) {
                checkbox.parentElement.style.opacity = '0.6';
                setTimeout(() => {
                    alert('æé†’å·²å®Œæˆï¼ğŸ‘');
                }, 300);
            } else {
                checkbox.parentElement.style.opacity = '1';
            }
        }

        // AI Companion functions
        function startActivity(type) {
            const activities = {
                music: 'è®“æˆ‘å€‘ä¾†è½ä¸€äº›æ‡·èˆŠçš„æ­Œæ›²å§ï¼æ‚¨æƒ³è½å°èªè€æ­Œé‚„æ˜¯åœ‹èªç¶“å…¸å‘¢ï¼Ÿ',
                photos: 'çœ‹ç…§ç‰‡æ˜¯å›æ†¶ç¾å¥½æ™‚å…‰çš„å¥½æ–¹æ³•ã€‚æ‚¨æœ‰ä»€éº¼ç‰¹åˆ¥çš„ç…§ç‰‡æƒ³åˆ†äº«å—ï¼Ÿ',
                stories: 'æˆ‘çŸ¥é“å¾ˆå¤šæœ‰è¶£çš„ç¯€æ…¶æ•…äº‹ã€‚æ‚¨æƒ³è½å“ªå€‹ç¯€æ—¥çš„æ•…äº‹å‘¢ï¼Ÿ',
                meditation: 'è®“æˆ‘å€‘ä¸€èµ·æ”¾é¬†å¿ƒæƒ…ã€‚è«‹æ·±å‘¼å¸ï¼Œæ„Ÿå—ç•¶ä¸‹çš„å¯§éœ...'
            };
            
            addMessage('å°é›¨', activities[type]);
        }

        function toggleRecording() {
            const recordBtn = document.getElementById('recordBtn');
            const recordingStatus = document.getElementById('recordingStatus');
            
            if (!isRecording) {
                // Start recording
                isRecording = true;
                recordBtn.classList.add('recording');
                recordBtn.innerHTML = '<div class="text-2xl">ğŸ”´</div>';
                recordingStatus.classList.remove('hidden');
                recordingStatus.textContent = 'æ­£åœ¨éŒ„éŸ³ä¸­...';
                
                // Simulate recording for 3 seconds
                setTimeout(() => {
                    stopRecording();
                }, 3000);
            } else {
                stopRecording();
            }
        }

        function stopRecording() {
            isRecording = false;
            const recordBtn = document.getElementById('recordBtn');
            const recordingStatus = document.getElementById('recordingStatus');
            
            recordBtn.classList.remove('recording');
            recordBtn.innerHTML = '<div class="text-2xl">ğŸ¤</div>';
            recordingStatus.classList.add('hidden');
            
            // Simulate voice recognition
            const mockTranscripts = [
                'ä»Šå¤©å¤©æ°£çœŸå¥½ï¼Œè®“æˆ‘æƒ³èµ·å¹´è¼•æ™‚çš„æ˜¥å¤©',
                'æˆ‘å¥½æƒ³å¿µæˆ‘çš„å®¶äºº',
                'å¯ä»¥æ’­æ”¾ä¸€äº›è€æ­Œçµ¦æˆ‘è½å—ï¼Ÿ',
                'æˆ‘è¨˜å¾—å°æ™‚å€™éå¹´çš„æƒ…æ™¯'
            ];
            
            const transcript = mockTranscripts[Math.floor(Math.random() * mockTranscripts.length)];
            document.getElementById('textInput').value = transcript;
            
            setTimeout(() => {
                sendMessage();
            }, 1000);
        }

        function sendMessage() {
            const input = document.getElementById('textInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            addMessage('æ‚¨', message, true);
            input.value = '';
            
            // Simulate AI response
            setTimeout(() => {
                const responses = [
                    'é€™çœŸæ˜¯ç¾å¥½çš„å›æ†¶å‘¢ï¼æ˜¥å¤©çš„ç¢ºæ˜¯å€‹å……æ»¿å¸Œæœ›çš„å­£ç¯€ã€‚æ‚¨æœ€å–œæ­¡æ˜¥å¤©çš„ä»€éº¼å‘¢ï¼Ÿ',
                    'å®¶äººçš„é™ªä¼´ç¸½æ˜¯æœ€æº«æš–çš„ã€‚è¦ä¸è¦è·Ÿæˆ‘åˆ†äº«ä¸€äº›å’Œå®¶äººçš„ç¾å¥½å›æ†¶ï¼Ÿ',
                    'ç•¶ç„¶å¯ä»¥ï¼æˆ‘ä¾†ç‚ºæ‚¨æ’­æ”¾ä¸€äº›ç¶“å…¸è€æ­Œã€‚æ‚¨æœ‰ç‰¹åˆ¥å–œæ­¡çš„æ­Œæ‰‹å—ï¼Ÿ',
                    'éå¹´çœŸæ˜¯å……æ»¿æ­¡æ¨‚çš„æ™‚å…‰ï¼æ‚¨é‚„è¨˜å¾—æœ€å–œæ­¡çš„å¹´èœæ˜¯ä»€éº¼å—ï¼Ÿ'
                ];
                const response = responses[Math.floor(Math.random() * responses.length)];
                addMessage('å°é›¨', response);
            }, 1500);
        }

        function addMessage(sender, message, isUser = false) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message mb-3';
            
            const now = new Date();
            const timeString = now.toLocaleTimeString('zh-TW', { hour: '2-digit', minute: '2-digit' });
            
            if (isUser) {
                messageDiv.innerHTML = `
                    <div class="flex justify-end">
                        <div class="bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl px-3 py-2 mb-1 max-w-xs">
                            <p class="text-sm">${message}</p>
                        </div>
                    </div>
                    <div class="text-xs text-gray-500 text-right">æ‚¨ â€¢ ${timeString}</div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="bg-white/50 rounded-xl p-3 mb-1">
                        <p class="text-sm">${message}</p>
                    </div>
                    <div class="text-xs text-gray-500">${sender} â€¢ ${timeString}</div>
                `;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            conversations.push({ sender, message, time: now, isUser });
            updateCounts();
        }

        // Memory Journal functions
        function showAddMemoryForm() {
            document.getElementById('addMemoryForm').classList.remove('hidden');
        }

        function hideAddMemoryForm() {
            document.getElementById('addMemoryForm').classList.add('hidden');
            // Clear form
            document.getElementById('memoryTitle').value = '';
            document.getElementById('memoryContent').value = '';
            document.getElementById('memoryType').selectedIndex = 0;
            document.getElementById('memoryMood').selectedIndex = 0;
        }

        function saveMemory() {
            const title = document.getElementById('memoryTitle').value.trim();
            const content = document.getElementById('memoryContent').value.trim();
            const type = document.getElementById('memoryType').value;
            const mood = document.getElementById('memoryMood').value;
            
            if (!title || !content) {
                alert('è«‹å¡«å¯«æ¨™é¡Œå’Œå…§å®¹ï¼');
                return;
            }
            
            const memory = {
                id: memories.length + 1,
                title,
                content,
                type,
                mood,
                date: new Date(),
                shared: false
            };
            
            memories.unshift(memory);
            renderMemories();
            hideAddMemoryForm();
            updateCounts();
            
            alert('å›æ†¶å·²å„²å­˜ï¼ğŸ’');
        }

        function renderMemories() {
            const memoryList = document.getElementById('memoryList');
            const existingMemories = memoryList.querySelectorAll('.glass-card');
            
            // Keep the first memory (example) and add new ones
            memories.slice(0, -1).forEach(memory => {
                const typeEmojis = {
                    daily_life: 'ğŸ“…',
                    family: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦',
                    travel: 'âœˆï¸',
                    food: 'ğŸ½ï¸',
                    festival: 'ğŸ‰',
                    childhood: 'ğŸ‘¶'
                };
                
                const moodEmojis = {
                    happy: 'ğŸ˜Š',
                    nostalgic: 'ğŸ¥º',
                    peaceful: 'ğŸ˜Œ',
                    excited: 'ğŸ¤—',
                    grateful: 'ğŸ™',
                    proud: 'ğŸ’ª'
                };
                
                const memoryDiv = document.createElement('div');
                memoryDiv.className = 'glass-card rounded-2xl p-4 mb-3';
                memoryDiv.innerHTML = `
                    <div class="flex items-start gap-3">
                        <div class="text-2xl">${typeEmojis[memory.type]}</div>
                        <div class="flex-1">
                            <h3 class="font-semibold mb-1">${memory.title}</h3>
                            <p class="text-sm text-gray-700 mb-2">${memory.content.substring(0, 80)}...</p>
                            <div class="flex items-center gap-2 text-xs text-gray-500">
                                <span>${moodEmojis[memory.mood]} ${getMoodText(memory.mood)}</span>
                                <span>â€¢</span>
                                <span>${getRelativeTime(memory.date)}</span>
                                ${memory.shared ? '<span>â€¢</span><span class="text-green-600">å·²åˆ†äº«</span>' : ''}
                            </div>
                        </div>
                    </div>
                `;
                
                memoryList.insertBefore(memoryDiv, memoryList.firstChild);
            });
        }

        function getMoodText(mood) {
            const moodTexts = {
                happy: 'é–‹å¿ƒ',
                nostalgic: 'æ‡·å¿µ',
                peaceful: 'å¹³éœ',
                excited: 'èˆˆå¥®',
                grateful: 'æ„Ÿæ©',
                proud: 'é©•å‚²'
            };
            return moodTexts[mood];
        }

        function getRelativeTime(date) {
            const now = new Date();
            const diff = Math.floor((now - date) / (24 * 60 * 60 * 1000));
            
            if (diff === 0) return 'ä»Šå¤©';
            if (diff === 1) return 'æ˜¨å¤©';
            if (diff < 7) return `${diff} å¤©å‰`;
            return date.toLocaleDateString('zh-TW');
        }

        // Family Connection functions
        function shareDailySummary() {
            alert('ä»Šæ—¥æ‘˜è¦å·²åˆ†äº«çµ¦å®¶äººï¼ğŸ“¤\n\nDavid å’Œç¾ç²æœƒæ”¶åˆ°æ‚¨ä»Šå¤©çš„æ´»å‹•æ‘˜è¦ï¼ŒåŒ…å«å°è©±è¨˜éŒ„å’Œå¿ƒæƒ…ç‹€æ…‹ã€‚');
        }

        // Cultural Content functions
        function filterCulture(category) {
            // Update active button
            document.querySelectorAll('[data-category]').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-category="${category}"]`).classList.add('active');
            
            // Filter content
            document.querySelectorAll('.cultural-item').forEach(item => {
                if (category === 'all' || item.dataset.category === category) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        function startCulturalChat(topic) {
            navigateTo('companion');
            setTimeout(() => {
                addMessage('å°é›¨', `è®“æˆ‘å€‘ä¾†èŠèŠ${topic}å§ï¼é€™æ˜¯å¾ˆæœ‰æ„æ€çš„è©±é¡Œå‘¢ï¼æ‚¨æœ‰ä»€éº¼ç›¸é—œçš„å›æ†¶æƒ³åˆ†äº«å—ï¼Ÿ`);
            }, 500);
        }

        // Emotion Tracking functions
        function initializeEmotionChart() {
            const ctx = document.getElementById('emotionChart').getContext('2d');
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['é€±ä¸€', 'é€±äºŒ', 'é€±ä¸‰', 'é€±å››', 'é€±äº”', 'é€±å…­', 'é€±æ—¥'],
                    datasets: [{
                        label: 'å¿ƒæƒ…åˆ†æ•¸',
                        data: [4, 3, 3, 4, 5, 3, 4],
                        backgroundColor: 'rgba(139, 92, 246, 0.6)',
                        borderColor: 'rgba(139, 92, 246, 1)',
                        borderWidth: 1,
                        borderRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 5,
                            ticks: {
                                stepSize: 1
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        // Initialize navigation
        document.querySelectorAll('.nav-btn').forEach(btn => {
            if (btn.dataset.page === 'dashboard') {
                btn.classList.add('active');
            }
        });
    </script>
</body>
</html>