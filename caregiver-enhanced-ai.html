<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PoignÃ©e ä¼´é˜® - é€²éšAIè«®è©¢ç³»çµ±</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Noto Sans TC', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #fef7ff 0%, #fdf2f8 25%, #eff6ff 75%, #f0f9ff 100%);
        }
        .glass-card {
            backdrop-filter: blur(16px);
            background: rgba(255, 255, 255, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        .glass-button {
            backdrop-filter: blur(16px);
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        .glass-button:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(0.95);
        }
        .glass-button.active {
            background: rgba(147, 51, 234, 0.3);
            border-color: rgba(147, 51, 234, 0.5);
        }
        .gradient-text {
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
        .floating-bg {
            position: fixed;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            mix-blend-mode: multiply;
            filter: blur(40px);
            opacity: 0.2;
            animation: float 8s ease-in-out infinite;
            pointer-events: none;
        }
        .floating-bg:nth-child(1) {
            background: #a855f7;
            top: 2rem;
            left: 1rem;
        }
        .floating-bg:nth-child(2) {
            background: #ec4899;
            top: 8rem;
            right: 1rem;
            animation-delay: 2s;
        }
        .floating-bg:nth-child(3) {
            background: #3b82f6;
            bottom: 8rem;
            left: 50%;
            transform: translateX(-50%);
            animation-delay: 4s;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px) translateX(0px); }
            50% { transform: translateY(-15px) translateX(8px); }
        }
        .ai-chat-1on1 {
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
        }
        .ai-chat-group {
            background: linear-gradient(135deg, #06b6d4, #3b82f6);
        }
        .message-user {
            background: rgba(139, 92, 246, 0.2);
            border-left: 4px solid #8b5cf6;
        }
        .message-ai {
            background: rgba(236, 72, 153, 0.2);
            border-left: 4px solid #ec4899;
        }
        .message-family {
            background: rgba(6, 182, 212, 0.2);
            border-left: 4px solid #06b6d4;
        }
        .notification-urgent {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .consultation-mode-toggle {
            border-radius: 50px;
            overflow: hidden;
        }
        .typing-indicator {
            animation: typing 1.5s infinite;
        }
        @keyframes typing {
            0% { opacity: 0.4; }
            50% { opacity: 1; }
            100% { opacity: 0.4; }
        }
        .family-member {
            transition: all 0.3s ease;
        }
        .family-member:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        .task-authorized {
            background: linear-gradient(45deg, #10b981, #059669);
            color: white;
        }
        .task-pending {
            background: linear-gradient(45deg, #f59e0b, #d97706);
            color: white;
        }
        .chat-container {
            height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Floating background elements -->
    <div class="floating-bg"></div>
    <div class="floating-bg"></div>
    <div class="floating-bg"></div>

    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header -->
        <div class="glass-card rounded-3xl p-6 mb-8">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <div class="text-4xl">ğŸŒ§ï¸</div>
                    <div>
                        <h1 class="text-2xl font-bold gradient-text">å°é›¨ AI è«®è©¢ä¸­å¿ƒ</h1>
                        <p class="text-sm text-gray-600">ä¸€å°ä¸€å°ˆæ¥­è«®è©¢ â€¢ å®¶åº­ç¾¤çµ„å”ä½œ</p>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <div class="text-xs text-gray-500">ç·šä¸Šäººæ•¸</div>
                    <div class="flex items-center gap-1">
                        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                        <div class="text-sm font-semibold">4äºº</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="glass-card rounded-2xl p-4 mb-6">
            <div class="flex items-center justify-center">
                <div class="consultation-mode-toggle glass-button flex rounded-full p-1">
                    <button onclick="switchMode('personal')" 
                            class="mode-btn px-6 py-2 rounded-full text-sm font-medium transition-all duration-300" 
                            id="personalBtn">
                        ğŸ¤ ä¸€å°ä¸€è«®è©¢
                    </button>
                    <button onclick="switchMode('group')" 
                            class="mode-btn px-6 py-2 rounded-full text-sm font-medium transition-all duration-300" 
                            id="groupBtn">
                        ğŸ‘¥ å®¶åº­ç¾¤çµ„
                    </button>
                </div>
            </div>
        </div>

        <!-- Personal Consultation Mode -->
        <div id="personalMode" class="consultation-mode active">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Main Caregiver Profile -->
                <div class="lg:col-span-1">
                    <div class="glass-card rounded-2xl p-6">
                        <div class="text-center mb-4">
                            <div class="w-20 h-20 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full mx-auto mb-3 flex items-center justify-center text-2xl text-white font-bold">
                                é™³
                            </div>
                            <h3 class="text-lg font-semibold">é™³ç¾ç²</h3>
                            <p class="text-sm text-gray-600">ä¸»è¦ç…§é¡§è€… â€¢ ç‹çˆºçˆºå¥³å…’</p>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="p-3 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl">
                                <h4 class="font-medium mb-2">ç…§è­·ç¶“é©—</h4>
                                <div class="text-sm text-gray-600 space-y-1">
                                    <p>â€¢ ç…§è­·æ™‚é–“ï¼š2å¹´3å€‹æœˆ</p>
                                    <p>â€¢ ç…§è­·å¼·åº¦ï¼šå…¨æ—¥ç…§è­·</p>
                                    <p>â€¢ å°ˆæ¥­è¨“ç·´ï¼šå·²å®ŒæˆåŸºç¤è¨“ç·´</p>
                                </div>
                            </div>
                            
                            <div class="p-3 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl">
                                <h4 class="font-medium mb-2">æœ€è¿‘é—œæ³¨</h4>
                                <div class="text-sm text-gray-600 space-y-1">
                                    <p>â€¢ å¤œé–“ç¡çœ å“è³ª</p>
                                    <p>â€¢ é§•é§›å®‰å…¨è©•ä¼°</p>
                                    <p>â€¢ æƒ…ç·’æ³¢å‹•ç®¡ç†</p>
                                </div>
                            </div>

                            <div class="p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl">
                                <h4 class="font-medium mb-2">è«®è©¢çµ±è¨ˆ</h4>
                                <div class="text-sm text-gray-600 space-y-1">
                                    <p>â€¢ æœ¬é€±è«®è©¢ï¼š12æ¬¡</p>
                                    <p>â€¢ å¹³å‡å›æ‡‰æ™‚é–“ï¼š30ç§’</p>
                                    <p>â€¢ æ»¿æ„åº¦è©•åˆ†ï¼š4.8/5.0</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Personal AI Chat -->
                <div class="lg:col-span-2">
                    <div class="glass-card rounded-2xl p-6">
                        <div class="ai-chat-1on1 rounded-xl p-4 mb-4">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
                                    ğŸŒ§ï¸
                                </div>
                                <div class="text-white">
                                    <h3 class="font-semibold">å°é›¨å°ˆå±¬è«®è©¢</h3>
                                    <p class="text-xs opacity-90">é‡å°æ‚¨çš„ç…§è­·éœ€æ±‚æä¾›å€‹äººåŒ–å»ºè­°</p>
                                </div>
                                <div class="ml-auto">
                                    <div class="text-xs text-white/80">ç·šä¸Š</div>
                                </div>
                            </div>
                        </div>

                        <div class="chat-container space-y-3 mb-4" id="personalChat">
                            <div class="message-ai p-3 rounded-xl">
                                <div class="flex items-start gap-3">
                                    <div class="text-lg">ğŸŒ§ï¸</div>
                                    <div class="flex-1">
                                        <p class="text-sm">é™³å¥³å£«æ‚¨å¥½ï¼æˆ‘æ³¨æ„åˆ°æ‚¨æœ€è¿‘ç¶“å¸¸è©¢å•é—œæ–¼ç‹çˆºçˆºçš„é§•é§›å®‰å…¨å•é¡Œã€‚ä»Šå¤©æœ‰ä»€éº¼ç‰¹åˆ¥æƒ³è¨è«–çš„å—ï¼Ÿ</p>
                                        <div class="text-xs text-gray-500 mt-1">å°é›¨ â€¢ å‰›å‰›</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message-user p-3 rounded-xl">
                                <div class="text-sm">æ˜¨å¤©çˆ¸çˆ¸é–‹è»Šå‡ºé–€è²·æ±è¥¿ï¼Œä½†æ˜¯ç¹äº†å¾ˆä¹…æ‰å›ä¾†ï¼Œæˆ‘å¾ˆæ“”å¿ƒä»–è¿·è·¯äº†</div>
                                <div class="text-xs text-gray-500 mt-1">æ‚¨ â€¢ 1åˆ†é˜å‰</div>
                            </div>

                            <div class="message-ai p-3 rounded-xl">
                                <div class="flex items-start gap-3">
                                    <div class="text-lg">ğŸŒ§ï¸</div>
                                    <div class="flex-1">
                                        <p class="text-sm">æˆ‘ç†è§£æ‚¨çš„æ“”å¿ƒã€‚æ ¹æ“šGPSè¨˜éŒ„ï¼Œç‹çˆºçˆºæ˜¨å¤©ç¢ºå¯¦åœ¨ç†Ÿæ‚‰è·¯æ®µå¤šç¹äº†15åˆ†é˜ã€‚é€™å¯èƒ½æ˜¯ç©ºé–“å°èˆªèƒ½åŠ›çš„è¼•å¾®è®ŠåŒ–ã€‚æˆ‘å»ºè­°ï¼š</p>
                                        <div class="mt-2 text-sm space-y-1">
                                            <p>ğŸš— <strong>å³æ™‚æªæ–½ï¼š</strong>è¨­å®šå¸¸ç”¨åœ°é»çš„é è¨­è·¯ç·š</p>
                                            <p>ğŸ“± <strong>æŠ€è¡“å”åŠ©ï¼š</strong>ç°¡åŒ–CarPlayä»‹é¢ï¼Œå¢å¤§å­—é«”</p>
                                            <p>ğŸ‘¨â€âš•ï¸ <strong>å°ˆæ¥­è©•ä¼°ï¼š</strong>å»ºè­°ä¸‹æ¬¡å›è¨ºæ™‚æåŠæ­¤æƒ…æ³</p>
                                            <p>ğŸ‘¥ <strong>å®¶äººå”åŠ©ï¼š</strong>å¯ä»¥å®‰æ’é™ªåŒå‡ºé–€å¹¾æ¬¡</p>
                                        </div>
                                        <div class="text-xs text-gray-500 mt-2">å°é›¨ â€¢ å‰›å‰›</div>
                                    </div>
                                </div>
                            </div>

                            <div class="typing-indicator message-ai p-3 rounded-xl">
                                <div class="flex items-center gap-3">
                                    <div class="text-lg">ğŸŒ§ï¸</div>
                                    <div class="flex gap-1">
                                        <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                                        <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                                        <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                                    </div>
                                    <div class="text-xs text-gray-500">å°é›¨æ­£åœ¨è¼¸å…¥...</div>
                                </div>
                            </div>
                        </div>

                        <div class="flex gap-2">
                            <input type="text" 
                                   placeholder="è¼¸å…¥æ‚¨çš„å•é¡Œæˆ–æ“”æ†‚..." 
                                   class="flex-1 glass-button rounded-lg px-4 py-2 text-sm"
                                   id="personalInput"
                                   onkeypress="if(event.key==='Enter') sendPersonalMessage()">
                            <button onclick="sendPersonalMessage()" class="glass-button rounded-lg px-4 py-2 text-sm">
                                ç™¼é€
                            </button>
                        </div>

                        <!-- Quick Actions for Personal Mode -->
                        <div class="mt-4 flex flex-wrap gap-2">
                            <button onclick="quickPersonalQuestion('sleep')" class="glass-button rounded-lg px-3 py-1 text-xs">
                                ğŸ˜´ ç¡çœ å•é¡Œ
                            </button>
                            <button onclick="quickPersonalQuestion('driving')" class="glass-button rounded-lg px-3 py-1 text-xs">
                                ğŸš— é§•é§›å®‰å…¨
                            </button>
                            <button onclick="quickPersonalQuestion('behavior')" class="glass-button rounded-lg px-3 py-1 text-xs">
                                ğŸ§  è¡Œç‚ºè®ŠåŒ–
                            </button>
                            <button onclick="quickPersonalQuestion('emergency')" class="glass-button rounded-lg px-3 py-1 text-xs">
                                ğŸš¨ ç·Šæ€¥è™•ç†
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Group Consultation Mode -->
        <div id="groupMode" class="consultation-mode">
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                <!-- Family Members Panel -->
                <div class="lg:col-span-1">
                    <div class="glass-card rounded-2xl p-4">
                        <h3 class="text-lg font-semibold mb-4">ğŸ‘¥ å®¶åº­æˆå“¡</h3>
                        
                        <div class="space-y-3">
                            <!-- Main Caregiver -->
                            <div class="family-member glass-card rounded-xl p-3">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white text-xs font-bold">é™³</div>
                                    <div class="flex-1">
                                        <div class="text-sm font-medium">é™³ç¾ç²</div>
                                        <div class="text-xs text-gray-500">ä¸»ç…§é¡§è€…</div>
                                    </div>
                                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                </div>
                                <div class="mt-2 text-xs text-gray-600">ğŸ‘‘ ç®¡ç†å“¡æ¬Šé™</div>
                            </div>

                            <!-- Family Member 2 -->
                            <div class="family-member glass-card rounded-xl p-3">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs font-bold">ç‹</div>
                                    <div class="flex-1">
                                        <div class="text-sm font-medium">ç‹å¿—æ˜</div>
                                        <div class="text-xs text-gray-500">å…’å­</div>
                                    </div>
                                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                </div>
                            </div>

                            <!-- Family Member 3 -->
                            <div class="family-member glass-card rounded-xl p-3">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-pink-500 rounded-full flex items-center justify-center text-white text-xs font-bold">æ</div>
                                    <div class="flex-1">
                                        <div class="text-sm font-medium">æå°è¯</div>
                                        <div class="text-xs text-gray-500">åª³å©¦</div>
                                    </div>
                                    <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                </div>
                            </div>

                            <!-- Family Member 4 -->
                            <div class="family-member glass-card rounded-xl p-3">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white text-xs font-bold">å¼µ</div>
                                    <div class="flex-1">
                                        <div class="text-sm font-medium">å¼µæ·‘èŠ¬</div>
                                        <div class="text-xs text-gray-500">çœ‹è­·</div>
                                    </div>
                                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Family Notifications -->
                        <div class="mt-6">
                            <h4 class="text-sm font-semibold mb-3">ğŸ“¢ å®¶åº­é€šçŸ¥</h4>
                            <div class="space-y-2">
                                <div class="notification-urgent rounded-lg p-2 text-xs">
                                    <div class="font-medium text-red-700">ğŸš¨ ç·Šæ€¥æé†’</div>
                                    <div class="text-red-600">ç‹çˆºçˆºå¿˜è¨˜åƒæ™šé¤è—¥ç‰©</div>
                                    <div class="text-red-500 text-xs mt-1">5åˆ†é˜å‰</div>
                                </div>
                                
                                <div class="glass-card rounded-lg p-2 text-xs">
                                    <div class="font-medium">ğŸ“… æ˜æ—¥æé†’</div>
                                    <div class="text-gray-600">å¾©å¥ç§‘å›è¨º 14:30</div>
                                    <div class="text-gray-500 text-xs mt-1">20åˆ†é˜å‰</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Group Chat -->
                <div class="lg:col-span-2">
                    <div class="glass-card rounded-2xl p-6">
                        <div class="ai-chat-group rounded-xl p-4 mb-4">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
                                    ğŸŒ§ï¸
                                </div>
                                <div class="text-white">
                                    <h3 class="font-semibold">å®¶åº­ç¾¤çµ„è«®è©¢</h3>
                                    <p class="text-xs opacity-90">å”èª¿ç…§è­·äº‹å‹™ â€¢ å…±äº«è³‡è¨Š â€¢ ä»»å‹™åˆ†é…</p>
                                </div>
                                <div class="ml-auto text-xs text-white/80">4äººç·šä¸Š</div>
                            </div>
                        </div>

                        <div class="chat-container space-y-3 mb-4" id="groupChat">
                            <div class="message-ai p-3 rounded-xl">
                                <div class="flex items-start gap-3">
                                    <div class="text-lg">ğŸŒ§ï¸</div>
                                    <div class="flex-1">
                                        <p class="text-sm"><strong>å°é›¨æé†’ï¼š</strong>ç‹çˆºçˆºä»Šå¤©çš„ç”¨è—¥æ™‚é–“å³å°‡åˆ°äº†ï¼ˆæ™šé¤å¾Œ30åˆ†é˜ï¼‰ï¼Œç›®å‰è² è²¬äººæ˜¯é™³ç¾ç²ã€‚</p>
                                        <div class="text-xs text-gray-500 mt-1">ç³»çµ±é€šçŸ¥ â€¢ å‰›å‰›</div>
                                    </div>
                                </div>
                            </div>

                            <div class="message-family p-3 rounded-xl">
                                <div class="flex items-start gap-3">
                                    <div class="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs font-bold">ç‹</div>
                                    <div class="flex-1">
                                        <div class="text-xs text-gray-500 mb-1">ç‹å¿—æ˜</div>
                                        <p class="text-sm">æˆ‘ä»Šå¤©æ™šä¸Š7é»å¯ä»¥éå»å¹«å¿™ï¼Œå°è¯å¦³é‚£é‚Šæ€éº¼æ¨£ï¼Ÿ</p>
                                        <div class="text-xs text-gray-500 mt-1">3åˆ†é˜å‰</div>
                                    </div>
                                </div>
                            </div>

                            <div class="message-family p-3 rounded-xl">
                                <div class="flex items-start gap-3">
                                    <div class="w-6 h-6 bg-pink-500 rounded-full flex items-center justify-center text-white text-xs font-bold">æ</div>
                                    <div class="flex-1">
                                        <div class="text-xs text-gray-500 mb-1">æå°è¯</div>
                                        <p class="text-sm">æˆ‘ä»Šå¤©è¦åŠ ç­ï¼Œå¯èƒ½9é»å¾Œæ‰èƒ½åˆ°ã€‚å¼µçœ‹è­·æ‡‰è©²åœ¨å°å§ï¼Ÿ</p>
                                        <div class="text-xs text-gray-500 mt-1">2åˆ†é˜å‰</div>
                                    </div>
                                </div>
                            </div>

                            <div class="message-ai p-3 rounded-xl">
                                <div class="flex items-start gap-3">
                                    <div class="text-lg">ğŸŒ§ï¸</div>
                                    <div class="flex-1">
                                        <p class="text-sm">æ ¹æ“šä»Šæ—¥æ’ç­ï¼Œå¼µæ·‘èŠ¬çœ‹è­·æœƒåœ¨7-11é»å€¼ç­ã€‚æˆ‘å»ºè­°ï¼š</p>
                                        <div class="mt-2 space-y-1 text-sm">
                                            <p>ğŸ“‹ <strong>ä»Šæ™šå®‰æ’ï¼š</strong></p>
                                            <p class="ml-4">â€¢ 7:00 ç‹å¿—æ˜åˆ°é”å”åŠ©</p>
                                            <p class="ml-4">â€¢ 7:30 ç¢ºèªæ™šé¤ç”¨è—¥</p>
                                            <p class="ml-4">â€¢ 8:00 å¼µçœ‹è­·æ¥æ‰‹å¤œç­ç…§è­·</p>
                                            <p class="ml-4">â€¢ 9:00 æå°è¯å›å®¶å¾Œå¯ä¼‘æ¯</p>
                                        </div>
                                        <div class="text-xs text-gray-500 mt-2">å°é›¨ â€¢ å‰›å‰›</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flex gap-2">
                            <input type="text" 
                                   placeholder="åœ¨å®¶åº­ç¾¤çµ„ä¸­ç™¼è¨€..." 
                                   class="flex-1 glass-button rounded-lg px-4 py-2 text-sm"
                                   id="groupInput"
                                   onkeypress="if(event.key==='Enter') sendGroupMessage()">
                            <button onclick="sendGroupMessage()" class="glass-button rounded-lg px-4 py-2 text-sm">
                                ç™¼é€
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Task Authorization Panel -->
                <div class="lg:col-span-1">
                    <div class="glass-card rounded-2xl p-4">
                        <h3 class="text-lg font-semibold mb-4">ğŸ“ ä»»å‹™åˆ†é…</h3>
                        
                        <div class="space-y-3">
                            <!-- Authorized Tasks -->
                            <div class="space-y-2">
                                <h4 class="text-sm font-medium text-gray-700">âœ… å·²æˆæ¬Šä»»å‹™</h4>
                                
                                <div class="task-authorized rounded-lg p-3">
                                    <div class="text-xs font-medium mb-1">æ™šé¤ç”¨è—¥æé†’</div>
                                    <div class="text-xs opacity-90">è² è²¬äººï¼šç‹å¿—æ˜</div>
                                    <div class="text-xs opacity-80 mt-1">â° 19:30</div>
                                </div>

                                <div class="task-authorized rounded-lg p-3">
                                    <div class="text-xs font-medium mb-1">è¡€å£“é‡æ¸¬</div>
                                    <div class="text-xs opacity-90">è² è²¬äººï¼šå¼µæ·‘èŠ¬</div>
                                    <div class="text-xs opacity-80 mt-1">â° 20:00</div>
                                </div>
                            </div>

                            <!-- Pending Tasks -->
                            <div class="space-y-2">
                                <h4 class="text-sm font-medium text-gray-700">â³ å¾…æˆæ¬Šä»»å‹™</h4>
                                
                                <div class="task-pending rounded-lg p-3">
                                    <div class="text-xs font-medium mb-1">æ˜æ—¥å¾©å¥æ¥é€</div>
                                    <div class="text-xs opacity-90">éœ€è¦æŒ‡æ´¾è² è²¬äºº</div>
                                    <button onclick="assignTask('rehab')" class="mt-2 text-xs bg-white/20 rounded px-2 py-1">
                                        æŒ‡æ´¾
                                    </button>
                                </div>

                                <div class="task-pending rounded-lg p-3">
                                    <div class="text-xs font-medium mb-1">é€±æœ«å¤–å‡ºé™ªä¼´</div>
                                    <div class="text-xs opacity-90">å»ºè­°å®¶äººè¼ªæµ</div>
                                    <button onclick="assignTask('weekend')" class="mt-2 text-xs bg-white/20 rounded px-2 py-1">
                                        æŒ‡æ´¾
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Task Creation -->
                        <div class="mt-6">
                            <h4 class="text-sm font-medium text-gray-700 mb-2">â• å¿«é€Ÿå»ºç«‹ä»»å‹™</h4>
                            <div class="space-y-2">
                                <button onclick="createQuickTask('medicine')" class="w-full glass-button rounded-lg p-2 text-xs text-left">
                                    ğŸ’Š ç”¨è—¥æé†’
                                </button>
                                <button onclick="createQuickTask('appointment')" class="w-full glass-button rounded-lg p-2 text-xs text-left">
                                    ğŸ¥ é†«ç™‚é ç´„
                                </button>
                                <button onclick="createQuickTask('activity')" class="w-full glass-button rounded-lg p-2 text-xs text-left">
                                    ğŸ¯ æ´»å‹•å®‰æ’
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Current consultation mode
        let currentMode = 'personal';

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            switchMode('personal');
            initializeAIPersonality();
        });

        // Switch between consultation modes
        function switchMode(mode) {
            currentMode = mode;
            
            // Update navigation buttons
            const personalBtn = document.getElementById('personalBtn');
            const groupBtn = document.getElementById('groupBtn');
            
            personalBtn.classList.remove('active');
            groupBtn.classList.remove('active');
            
            if (mode === 'personal') {
                personalBtn.classList.add('active');
                document.getElementById('personalMode').classList.add('active');
                document.getElementById('groupMode').classList.remove('active');
            } else {
                groupBtn.classList.add('active');
                document.getElementById('groupMode').classList.add('active');
                document.getElementById('personalMode').classList.remove('active');
            }
        }

        // Personal consultation functions
        function sendPersonalMessage() {
            const input = document.getElementById('personalInput');
            const message = input.value.trim();
            
            if (message) {
                addPersonalMessage(message, true);
                input.value = '';
                
                // Simulate AI response
                setTimeout(() => {
                    const response = generatePersonalAIResponse(message);
                    addPersonalMessage(response, false);
                }, 2000);
            }
        }

        function addPersonalMessage(message, isUser = false) {
            const chatContainer = document.getElementById('personalChat');
            const messageDiv = document.createElement('div');
            
            if (isUser) {
                messageDiv.className = 'message-user p-3 rounded-xl';
                messageDiv.innerHTML = `
                    <div class="text-sm">${message}</div>
                    <div class="text-xs text-gray-500 mt-1">æ‚¨ â€¢ å‰›å‰›</div>
                `;
            } else {
                messageDiv.className = 'message-ai p-3 rounded-xl';
                messageDiv.innerHTML = `
                    <div class="flex items-start gap-3">
                        <div class="text-lg">ğŸŒ§ï¸</div>
                        <div class="flex-1">
                            <p class="text-sm">${message}</p>
                            <div class="text-xs text-gray-500 mt-1">å°é›¨ â€¢ å‰›å‰›</div>
                        </div>
                    </div>
                `;
            }
            
            // Remove typing indicator if exists
            const typingIndicator = chatContainer.querySelector('.typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
            
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function generatePersonalAIResponse(message) {
            const responses = {
                'sleep': 'é—œæ–¼ç¡çœ å•é¡Œï¼Œæˆ‘è§€å¯Ÿåˆ°ç‹çˆºçˆºæœ€è¿‘çš„ç¡çœ æ¨¡å¼æœ‰äº›è®ŠåŒ–ã€‚å»ºè­°ï¼š\n\nğŸŒ™ **ç’°å¢ƒèª¿æ•´ï¼š** ä¿æŒæˆ¿é–“å®‰éœã€é©æº«\nâ° **ä½œæ¯è¦å¾‹ï¼š** å›ºå®šå°±å¯¢å’Œèµ·åºŠæ™‚é–“\nğŸš« **é¿å…åˆºæ¿€ï¼š** ç¡å‰æ¸›å°‘å’–å•¡å› å’Œè¢å¹•æ™‚é–“\nğŸ’Š **è—¥ç‰©æª¢è¦–ï¼š** èˆ‡é†«å¸«è¨è«–æ˜¯å¦éœ€è¦èª¿æ•´ç”¨è—¥\n\néœ€è¦æˆ‘å¹«æ‚¨åˆ¶å®šè©³ç´°çš„ç¡çœ æ”¹å–„è¨ˆåŠƒå—ï¼Ÿ',
                
                'driving': 'é§•é§›å®‰å…¨æ˜¯å¾ˆé‡è¦çš„è€ƒé‡ã€‚æ ¹æ“šæœ€è¿‘çš„GPSæ•¸æ“šåˆ†æï¼š\n\nğŸš— **èƒ½åŠ›è©•ä¼°ï¼š** ç‹çˆºçˆºåœ¨ç†Ÿæ‚‰è·¯ç·šè¡¨ç¾è‰¯å¥½\nâš ï¸ **æ³¨æ„äº‹é …ï¼š** è¤‡é›œè·¯æ³æ™‚éœ€è¦æ›´å¤šæ™‚é–“\nğŸ“± **æŠ€è¡“å”åŠ©ï¼š** å»ºè­°ä½¿ç”¨èªéŸ³å°èˆªå’Œå¤§å­—é«”\nğŸ‘¥ **å®¶äººé™ªä¼´ï¼š** æ–°è·¯ç·šå»ºè­°å…ˆæœ‰äººé™ªåŒ\n\næˆ‘å¯ä»¥å”åŠ©æ‚¨è¨­å®šæ›´è©³ç´°çš„é§•é§›å®‰å…¨ç›£æ§ç³»çµ±ã€‚',
                
                'behavior': 'è¡Œç‚ºè®ŠåŒ–éœ€è¦ä»”ç´°è§€å¯Ÿå’Œè¨˜éŒ„ï¼š\n\nğŸ“Š **æ¨¡å¼åˆ†æï¼š** æˆ‘æœƒæŒçºŒç›£æ§ä¸¦æä¾›è¶¨å‹¢å ±å‘Š\nğŸ§  **èªçŸ¥è©•ä¼°ï¼š** å»ºè­°å®šæœŸé€²è¡Œç°¡å–®çš„èªçŸ¥æ¸¬è©¦\nğŸ’ **æƒ…æ„Ÿæ”¯æŒï¼š** ä¿æŒè€å¿ƒå’Œç†è§£å¾ˆé‡è¦\nğŸ‘¨â€âš•ï¸ **å°ˆæ¥­è«®è©¢ï¼š** é¡¯è‘—è®ŠåŒ–æ™‚æ‡‰åŠæ™‚å°±é†«\n\næ‚¨æœ‰æ³¨æ„åˆ°å“ªäº›å…·é«”çš„è¡Œç‚ºè®ŠåŒ–å—ï¼Ÿ',
                
                'emergency': 'ç·Šæ€¥æƒ…æ³è™•ç†æµç¨‹ï¼š\n\nğŸš¨ **ç«‹å³è¡Œå‹•ï¼š** ç¢ºä¿ç‹çˆºçˆºå®‰å…¨ï¼Œå¿…è¦æ™‚æ’¥æ‰“119\nğŸ“ **è¯çµ¡ç¶²çµ¡ï¼š** æˆ‘æœƒåŒæ™‚é€šçŸ¥æ‰€æœ‰å®¶åº­æˆå“¡\nğŸ¥ **é†«ç™‚è³‡è¨Šï¼š** æº–å‚™å¥½ç”¨è—¥æ¸…å–®å’Œé†«ç™‚ç´€éŒ„\nğŸ“ **ä½ç½®è¿½è¹¤ï¼š** GPSå®šä½åŠŸèƒ½éš¨æ™‚å¯ç”¨\n\næˆ‘å·²ç¶“ç‚ºæ‚¨é è¨­äº†ç·Šæ€¥è¯çµ¡äººé †åºå’Œè™•ç†æ­¥é©Ÿã€‚'
            };

            // Check for keywords and return appropriate response
            for (const [key, response] of Object.entries(responses)) {
                if (message.toLowerCase().includes(key) || 
                    (key === 'sleep' && (message.includes('ç¡çœ ') || message.includes('å¤±çœ '))) ||
                    (key === 'driving' && (message.includes('é–‹è»Š') || message.includes('é§•é§›'))) ||
                    (key === 'behavior' && (message.includes('è¡Œç‚º') || message.includes('æƒ…ç·’'))) ||
                    (key === 'emergency' && (message.includes('ç·Šæ€¥') || message.includes('å±éšª')))) {
                    return response;
                }
            }
            
            return `æˆ‘ç†è§£æ‚¨çš„æ“”æ†‚ã€‚ä½œç‚ºæ‚¨çš„å°ˆå±¬AIåŠ©ç†ï¼Œæˆ‘å»ºè­°æˆ‘å€‘å¯ä»¥ï¼š\n\nğŸ’­ **æ·±åº¦åˆ†æï¼š** è®“æˆ‘æ›´è©³ç´°åœ°äº†è§£å…·é«”æƒ…æ³\nğŸ“‹ **å€‹äººåŒ–å»ºè­°ï¼š** æ ¹æ“šç‹çˆºçˆºçš„ç‹€æ³æä¾›å»ºè­°\nğŸ‘¥ **å®¶åº­å”èª¿ï¼š** å¿…è¦æ™‚å”èª¿å…¶ä»–å®¶åº­æˆå“¡å”åŠ©\nğŸ“Š **æŒçºŒè¿½è¹¤ï¼š** æˆ‘æœƒæŒçºŒé—œæ³¨ä¸¦æä¾›æ›´æ–°\n\næ‚¨èƒ½å‘Šè¨´æˆ‘æ›´å¤šå…·é«”çš„æƒ…æ³å—ï¼Ÿé€™æ¨£æˆ‘èƒ½æä¾›æ›´ç²¾æº–çš„å»ºè­°ã€‚`;
        }

        function quickPersonalQuestion(type) {
            const questions = {
                'sleep': 'æœ€è¿‘çˆ¸çˆ¸çš„ç¡çœ å“è³ªæ€éº¼æ¨£ï¼Ÿæœ‰ä»€éº¼æ”¹å–„å»ºè­°å—ï¼Ÿ',
                'driving': 'é—œæ–¼çˆ¸çˆ¸çš„é§•é§›å®‰å…¨ï¼Œæˆ‘æ‡‰è©²æ³¨æ„å“ªäº›è­¦è¨Šï¼Ÿ',
                'behavior': 'å¦‚ä½•åˆ¤æ–·çˆ¸çˆ¸çš„è¡Œç‚ºè®ŠåŒ–æ˜¯å¦éœ€è¦å°ˆæ¥­å”åŠ©ï¼Ÿ',
                'emergency': 'å¦‚æœç™¼ç”Ÿç·Šæ€¥ç‹€æ³ï¼Œæˆ‘æ‡‰è©²æ€éº¼è™•ç†ï¼Ÿ'
            };
            
            const input = document.getElementById('personalInput');
            input.value = questions[type];
            sendPersonalMessage();
        }

        // Group consultation functions
        function sendGroupMessage() {
            const input = document.getElementById('groupInput');
            const message = input.value.trim();
            
            if (message) {
                addGroupMessage(message, 'é™³', 'purple');
                input.value = '';
                
                // Simulate AI response for group
                setTimeout(() => {
                    const response = generateGroupAIResponse(message);
                    addGroupMessage(response, 'ğŸŒ§ï¸', 'ai');
                }, 2000);
            }
        }

        function addGroupMessage(message, sender, color) {
            const chatContainer = document.getElementById('groupChat');
            const messageDiv = document.createElement('div');
            
            if (color === 'ai') {
                messageDiv.className = 'message-ai p-3 rounded-xl';
                messageDiv.innerHTML = `
                    <div class="flex items-start gap-3">
                        <div class="text-lg">ğŸŒ§ï¸</div>
                        <div class="flex-1">
                            <p class="text-sm">${message}</p>
                            <div class="text-xs text-gray-500 mt-1">å°é›¨ â€¢ å‰›å‰›</div>
                        </div>
                    </div>
                `;
            } else {
                messageDiv.className = 'message-family p-3 rounded-xl';
                messageDiv.innerHTML = `
                    <div class="flex items-start gap-3">
                        <div class="w-6 h-6 bg-${color}-500 rounded-full flex items-center justify-center text-white text-xs font-bold">${sender}</div>
                        <div class="flex-1">
                            <div class="text-xs text-gray-500 mb-1">é™³ç¾ç²</div>
                            <p class="text-sm">${message}</p>
                            <div class="text-xs text-gray-500 mt-1">å‰›å‰›</div>
                        </div>
                    </div>
                `;
            }
            
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function generateGroupAIResponse(message) {
            return `æ„Ÿè¬é™³ç¾ç²çš„åˆ†äº«ã€‚æˆ‘å»ºè­°å…¨å®¶å¯ä»¥é€™æ¨£åˆ†å·¥ï¼š\n\nğŸ“‹ **ä»»å‹™åˆ†é…å»ºè­°ï¼š**\nâ€¢ ç‹å¿—æ˜ï¼šè² è²¬é€±é–“æ™šé¤æ™‚æ®µç…§è­·\nâ€¢ æå°è¯ï¼šè² è²¬é€±æœ«æ—¥é–“æ´»å‹•å®‰æ’\nâ€¢ å¼µæ·‘èŠ¬ï¼šæŒçºŒå¤œé–“å°ˆæ¥­ç…§è­·\nâ€¢ é™³ç¾ç²ï¼šçµ±ç±Œå”èª¿å’Œé†«ç™‚æ±ºç­–\n\næˆ‘å·²ç¶“å°‡ç›¸é—œä»»å‹™åŠ å…¥å¾…æˆæ¬Šæ¸…å–®ï¼Œè«‹ä¸»ç…§é¡§è€…ç¢ºèªåˆ†é…ã€‚\n\næœ‰ä»»ä½•èª¿æ•´éœ€æ±‚å—ï¼Ÿ`;
        }

        // Task management functions
        function assignTask(taskType) {
            const tasks = {
                'rehab': {
                    name: 'æ˜æ—¥å¾©å¥æ¥é€',
                    options: ['ç‹å¿—æ˜', 'æå°è¯', 'å¼µæ·‘èŠ¬']
                },
                'weekend': {
                    name: 'é€±æœ«å¤–å‡ºé™ªä¼´',
                    options: ['ç‹å¿—æ˜', 'æå°è¯', 'é™³ç¾ç²']
                }
            };
            
            const task = tasks[taskType];
            const assignee = prompt(`è«‹é¸æ“‡ã€Œ${task.name}ã€çš„è² è²¬äººï¼š\n\nå¯é¸æ“‡ï¼š${task.options.join('ã€')}`);
            
            if (assignee && task.options.includes(assignee)) {
                alert(`âœ… ä»»å‹™å·²æŒ‡æ´¾çµ¦ ${assignee}\n\nä»»å‹™ï¼š${task.name}\nç³»çµ±å°‡è‡ªå‹•ç™¼é€é€šçŸ¥çµ¦ç›¸é—œäººå“¡ã€‚`);
                
                // Add to group chat
                setTimeout(() => {
                    addGroupMessage(`ğŸ“‹ **ä»»å‹™æŒ‡æ´¾é€šçŸ¥**\n\nä»»å‹™ï¼š${task.name}\nè² è²¬äººï¼š${assignee}\næŒ‡æ´¾è€…ï¼šé™³ç¾ç²ï¼ˆä¸»ç…§é¡§è€…ï¼‰\n\nè«‹ ${assignee} ç¢ºèªæ˜¯å¦å¯ä»¥æ‰¿æ¥æ­¤ä»»å‹™ã€‚`, 'ğŸŒ§ï¸', 'ai');
                }, 1000);
            }
        }

        function createQuickTask(taskType) {
            const tasks = {
                'medicine': 'ğŸ’Š ç”¨è—¥æé†’ä»»å‹™',
                'appointment': 'ğŸ¥ é†«ç™‚é ç´„å®‰æ’',
                'activity': 'ğŸ¯ æ—¥å¸¸æ´»å‹•è¦åŠƒ'
            };
            
            const taskName = prompt(`å»ºç«‹ ${tasks[taskType]}ï¼š\n\nè«‹è¼¸å…¥å…·é«”ä»»å‹™æè¿°ï¼š`);
            
            if (taskName) {
                alert(`âœ… æ–°ä»»å‹™å·²å»ºç«‹\n\nä»»å‹™ï¼š${taskName}\nåˆ†é¡ï¼š${tasks[taskType]}\nç‹€æ…‹ï¼šå¾…æŒ‡æ´¾è² è²¬äºº\n\nä»»å‹™å·²åŠ å…¥å¾…æˆæ¬Šæ¸…å–®ã€‚`);
            }
        }

        // AI personality initialization
        function initializeAIPersonality() {
            // Add startup message to personal chat
            setTimeout(() => {
                addPersonalMessage('é™³å¥³å£«ï¼Œå¾ˆé«˜èˆˆè¦‹åˆ°æ‚¨ï¼æˆ‘æ˜¯å°é›¨ï¼Œæ‚¨çš„å°ˆå±¬AIç…§è­·åŠ©ç†ã€‚æˆ‘å·²ç¶“åˆ†æäº†ç‹çˆ·çˆ·æœ€è¿‘çš„ç‹€æ³ï¼Œæœ‰ä»»ä½•å•é¡Œéƒ½å¯ä»¥éš¨æ™‚å‘æˆ‘è«®è©¢ã€‚ä»Šå¤©æƒ³èŠä»€éº¼å‘¢ï¼Ÿ', false);
            }, 1000);
        }

        // Auto-scroll chat containers
        function autoScrollChats() {
            const personalChat = document.getElementById('personalChat');
            const groupChat = document.getElementById('groupChat');
            
            if (personalChat) personalChat.scrollTop = personalChat.scrollHeight;
            if (groupChat) groupChat.scrollTop = groupChat.scrollHeight;
        }

        // Periodic updates simulation
        setInterval(() => {
            if (Math.random() > 0.7) { // 30% chance every 10 seconds
                if (currentMode === 'group') {
                    const updates = [
                        'ğŸ“Š ç‹çˆºçˆºè¡€å£“é‡æ¸¬å®Œæˆï¼š130/85 mmHgï¼Œæ•¸å€¼æ­£å¸¸ã€‚',
                        'ğŸš— GPSæé†’ï¼šç‹çˆºçˆºå·²å®‰å…¨æŠµé”ç¾å»‰ç¤¾ï¼Œè³¼ç‰©é€²è¡Œä¸­ã€‚',
                        'ğŸ’Š ç”¨è—¥æé†’ï¼šæ™šé¤å¾Œè—¥ç‰©å·²æŒ‰æ™‚æœç”¨ï¼Œè¨˜éŒ„å·²æ›´æ–°ã€‚',
                        'ğŸ˜Š æƒ…ç·’ç›£æ¸¬ï¼šç‹çˆºçˆºä»Šæ—¥å¿ƒæƒ…æ„‰å¿«ï¼Œåƒèˆ‡æ´»å‹•ç©æ¥µã€‚'
                    ];
                    
                    const randomUpdate = updates[Math.floor(Math.random() * updates.length)];
                    addGroupMessage(randomUpdate, 'ğŸŒ§ï¸', 'ai');
                }
            }
        }, 10000);

        // Initialize auto-scroll
        setInterval(autoScrollChats, 1000);
    </script>
</body>
</html>