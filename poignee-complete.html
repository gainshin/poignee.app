<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PoignÃ©e ä¼´é˜® - å®Œæ•´åŠŸèƒ½ç…§è­·ç®¡ç†å¹³å°</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+TC:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'inter': ['Inter', 'system-ui'],
                        'noto': ['Noto Sans TC', 'system-ui']
                    },
                    colors: {
                        'brand': {
                            50: '#fef7ff',
                            100: '#feeeff', 
                            200: '#fcd8ff',
                            300: '#f9b5ff',
                            400: '#f482ff',
                            500: '#ec4eff',
                            600: '#d821eb',
                            700: '#b815c7',
                            800: '#9614a3',
                            900: '#791682'
                        },
                        'accent': {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd', 
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e'
                        }
                    },
                    boxShadow: {
                        'soft': '0 2px 15px -3px rgba(0, 0, 0, 0.07), 0 10px 20px -2px rgba(0, 0, 0, 0.04)',
                        'medium': '0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',
                        'large': '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',
                        'glow': '0 0 20px rgba(236, 78, 255, 0.3)',
                        'glow-blue': '0 0 20px rgba(14, 165, 233, 0.3)'
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, 
                #fef7ff 0%, 
                #f0f9ff 25%, 
                #feeeff 50%, 
                #e0f2fe 75%, 
                #fef7ff 100%);
            min-height: 100vh;
        }

        /* Modern Glass Cards */
        .neo-card {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.06), 
                        inset 0 1px 0 rgba(255, 255, 255, 0.6);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .neo-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1), 
                        inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }

        /* Gradient Buttons */
        .btn-primary {
            background: linear-gradient(135deg, #ec4eff 0%, #d821eb 100%);
            color: white;
            border: none;
            border-radius: 16px;
            padding: 12px 24px;
            font-weight: 600;
            font-size: 14px;
            box-shadow: 0 4px 15px rgba(236, 78, 255, 0.4);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(236, 78, 255, 0.6);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
            color: white;
            border: none;
            border-radius: 16px;
            padding: 12px 24px;
            font-weight: 600;
            font-size: 14px;
            box-shadow: 0 4px 15px rgba(14, 165, 233, 0.4);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(14, 165, 233, 0.6);
        }

        /* Navigation Tabs */
        .nav-tab {
            position: relative;
            padding: 12px 24px;
            border-radius: 12px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.3);
            cursor: pointer;
        }

        .nav-tab.active {
            background: linear-gradient(135deg, #ec4eff 0%, #d821eb 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(236, 78, 255, 0.4);
        }

        .nav-tab:hover:not(.active) {
            background: rgba(255, 255, 255, 0.8);
            transform: translateY(-1px);
        }

        /* Status Indicators */
        .status-online {
            background: linear-gradient(135deg, #10b981, #059669);
            animation: pulse-subtle 2s infinite;
        }

        .status-warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            animation: pulse-subtle 2s infinite;
        }

        .status-error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            animation: pulse-urgent 1.5s infinite;
        }

        @keyframes pulse-subtle {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.9; }
        }

        @keyframes pulse-urgent {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        /* Chat Messages */
        .message-user {
            background: linear-gradient(135deg, #ec4eff 0%, #d821eb 100%);
            color: white;
            border-radius: 20px 20px 4px 20px;
            margin-left: 20%;
            animation: slideInUp 0.3s ease-out;
        }

        .message-ai {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 20px 20px 20px 4px;
            margin-right: 20%;
            animation: slideInUp 0.3s ease-out;
        }

        .message-family {
            background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
            color: white;
            border-radius: 20px 20px 4px 20px;
            margin-left: 15%;
            margin-right: 15%;
            animation: slideInUp 0.3s ease-out;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Page Transitions */
        .page {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: none;
        }

        .page.active {
            opacity: 1;
            transform: translateY(0);
            display: block;
        }

        /* Form Elements */
        .form-input {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            padding: 12px 16px;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .form-input:focus {
            outline: none;
            border-color: #ec4eff;
            box-shadow: 0 0 0 3px rgba(236, 78, 255, 0.1);
            background: rgba(255, 255, 255, 0.95);
        }

        /* Interactive Elements */
        .interactive-element {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }

        .interactive-element:hover {
            transform: scale(1.02);
        }

        .interactive-element:active {
            transform: scale(0.98);
        }

        /* Floating Elements */
        .floating-orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(60px);
            opacity: 0.1;
            animation: float 8s ease-in-out infinite;
            pointer-events: none;
            z-index: -1;
        }

        .floating-orb:nth-child(1) {
            width: 300px;
            height: 300px;
            background: linear-gradient(45deg, #ec4eff, #d821eb);
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }

        .floating-orb:nth-child(2) {
            width: 200px;
            height: 200px;
            background: linear-gradient(45deg, #0ea5e9, #0284c7);
            top: 60%;
            right: 10%;
            animation-delay: 2s;
        }

        .floating-orb:nth-child(3) {
            width: 250px;
            height: 250px;
            background: linear-gradient(45deg, #10b981, #059669);
            bottom: 10%;
            left: 50%;
            transform: translateX(-50%);
            animation-delay: 4s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) translateX(0px) scale(1); }
            33% { transform: translateY(-20px) translateX(10px) scale(1.1); }
            66% { transform: translateY(10px) translateX(-10px) scale(0.9); }
        }

        /* Custom Scrollbar */
        .custom-scrollbar {
            scrollbar-width: thin;
            scrollbar-color: rgba(236, 78, 255, 0.3) transparent;
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #ec4eff, #d821eb);
            border-radius: 3px;
        }

        /* Typography */
        .text-gradient {
            background: linear-gradient(135deg, #ec4eff 0%, #d821eb 50%, #0ea5e9 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Status Cards */
        .status-card-good {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.05) 100%);
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        .status-card-warning {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(217, 119, 6, 0.05) 100%);
            border: 1px solid rgba(245, 158, 11, 0.2);
        }

        .status-card-error {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(220, 38, 38, 0.05) 100%);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }
    </style>
</head>
<body class="font-inter">
    <!-- Floating Background Elements -->
    <div class="floating-orb"></div>
    <div class="floating-orb"></div>
    <div class="floating-orb"></div>

    <div class="min-h-screen">
        <!-- Modern Header -->
        <header class="sticky top-0 z-50">
            <div class="neo-card mx-4 mt-4 mb-6">
                <div class="px-8 py-6">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <div class="w-14 h-14 bg-gradient-to-br from-brand-400 to-brand-600 rounded-2xl flex items-center justify-center text-white text-2xl font-bold shadow-glow">
                                P
                            </div>
                            <div>
                                <h1 class="text-2xl font-bold text-gradient">PoignÃ©e ä¼´é˜®</h1>
                                <p class="text-slate-600 text-sm font-medium">æ™ºèƒ½ç…§è­·ç®¡ç†å¹³å°</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-6">
                            <!-- Connection Status -->
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 status-online rounded-full shadow-glow"></div>
                                <span class="text-sm font-medium text-slate-700">ç³»çµ±é€£ç·šæ­£å¸¸</span>
                            </div>
                            
                            <!-- User Avatar -->
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-gradient-to-br from-accent-400 to-accent-600 rounded-xl flex items-center justify-center text-white font-semibold">
                                    é™³
                                </div>
                                <div class="text-right">
                                    <div class="text-sm font-semibold text-slate-800">é™³ç¾ç²</div>
                                    <div class="text-xs text-slate-500">ä¸»è¦ç…§é¡§è€…</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <main class="container mx-auto px-4 max-w-7xl">
            <!-- Navigation Tabs -->
            <div class="mb-8">
                <div class="flex justify-center">
                    <div class="neo-card p-2">
                        <div class="flex space-x-2">
                            <button onclick="switchTab('overview')" class="nav-tab active" id="overviewTab">
                                <span class="flex items-center space-x-2">
                                    <span class="text-lg">ğŸ“Š</span>
                                    <span class="font-medium">ç¸½è¦½</span>
                                </span>
                            </button>
                            <button onclick="switchTab('ai-consultation')" class="nav-tab" id="ai-consultationTab">
                                <span class="flex items-center space-x-2">
                                    <span class="text-lg">ğŸ¤–</span>
                                    <span class="font-medium">AI è«®è©¢</span>
                                </span>
                            </button>
                            <button onclick="switchTab('navigation')" class="nav-tab" id="navigationTab">
                                <span class="flex items-center space-x-2">
                                    <span class="text-lg">ğŸš—</span>
                                    <span class="font-medium">å°èˆªå®‰å…¨</span>
                                </span>
                            </button>
                            <button onclick="switchTab('family')" class="nav-tab" id="familyTab">
                                <span class="flex items-center space-x-2">
                                    <span class="text-lg">ğŸ‘¥</span>
                                    <span class="font-medium">å®¶åº­å”ä½œ</span>
                                </span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Overview Tab -->
            <div id="overviewContent" class="page active">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Main Status Card -->
                    <div class="lg:col-span-2">
                        <div class="neo-card p-8 mb-8">
                            <div class="flex items-center justify-between mb-6">
                                <h2 class="text-2xl font-bold text-slate-800">ç‹çˆºçˆºä»Šæ—¥ç‹€æ³</h2>
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 status-online rounded-full"></div>
                                    <span class="text-sm font-medium text-emerald-700">ç‹€æ…‹è‰¯å¥½</span>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div class="status-card-good rounded-2xl p-6 interactive-element">
                                    <div class="flex items-center justify-between mb-4">
                                        <div class="text-3xl">ğŸ§ </div>
                                        <div class="text-right">
                                            <div class="text-2xl font-bold text-emerald-700">85%</div>
                                            <div class="text-sm text-emerald-600">èªçŸ¥æ´»å‹•</div>
                                        </div>
                                    </div>
                                    <p class="text-sm text-slate-600">ä»Šæ—¥å®Œæˆè¨˜æ†¶è¨“ç·´ï¼Œè¡¨ç¾ç©©å®š</p>
                                </div>
                                
                                <div class="status-card-good rounded-2xl p-6 interactive-element">
                                    <div class="flex items-center justify-between mb-4">
                                        <div class="text-3xl">ğŸš—</div>
                                        <div class="text-right">
                                            <div class="text-2xl font-bold text-emerald-700">å®‰å…¨</div>
                                            <div class="text-sm text-emerald-600">é§•é§›ç‹€æ…‹</div>
                                        </div>
                                    </div>
                                    <p class="text-sm text-slate-600">æŒ‰é è¨­è·¯ç·šï¼Œç„¡åé›¢è¡Œç‚º</p>
                                </div>
                                
                                <div class="status-card-warning rounded-2xl p-6 interactive-element">
                                    <div class="flex items-center justify-between mb-4">
                                        <div class="text-3xl">ğŸ’Š</div>
                                        <div class="text-right">
                                            <div class="text-2xl font-bold text-amber-700">æé†’</div>
                                            <div class="text-sm text-amber-600">ç”¨è—¥æ™‚é–“</div>
                                        </div>
                                    </div>
                                    <p class="text-sm text-slate-600">æ™šé¤å¾Œè—¥ç‰© - 19:30</p>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Actions -->
                        <div class="neo-card p-6">
                            <h3 class="text-lg font-semibold text-slate-800 mb-4">å¿«é€Ÿæ“ä½œ</h3>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                <button onclick="emergencyCall()" class="btn-primary interactive-element">
                                    <span class="block text-lg mb-1">ğŸ“</span>
                                    <span class="text-sm">ç·Šæ€¥è¯çµ¡</span>
                                </button>
                                <button onclick="showLocation()" class="btn-secondary interactive-element">
                                    <span class="block text-lg mb-1">ğŸ“</span>
                                    <span class="text-sm">ä½ç½®è¿½è¹¤</span>
                                </button>
                                <button onclick="medicineReminder()" class="btn-primary interactive-element">
                                    <span class="block text-lg mb-1">ğŸ’Š</span>
                                    <span class="text-sm">ç”¨è—¥æé†’</span>
                                </button>
                                <button onclick="medicalRecord()" class="btn-secondary interactive-element">
                                    <span class="block text-lg mb-1">ğŸ¥</span>
                                    <span class="text-sm">é†«ç™‚è¨˜éŒ„</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Sidebar -->
                    <div class="space-y-6">
                        <!-- AI Assistant Card -->
                        <div class="neo-card p-6">
                            <div class="flex items-center space-x-3 mb-4">
                                <div class="w-12 h-12 bg-gradient-to-br from-brand-400 to-brand-600 rounded-xl flex items-center justify-center text-white text-xl shadow-glow">
                                    ğŸŒ§ï¸
                                </div>
                                <div>
                                    <h3 class="font-semibold text-slate-800">å°é›¨ AI åŠ©ç†</h3>
                                    <p class="text-xs text-slate-500">å°ˆå±¬ç…§è­·é¡§å•</p>
                                </div>
                            </div>
                            <div class="bg-gradient-to-r from-brand-50 to-accent-50 rounded-xl p-4 mb-4">
                                <p class="text-sm text-slate-700 mb-2">"ä»Šå¤©ç‹çˆºçˆºçš„æ•´é«”ç‹€æ³ä¸éŒ¯ï¼Œå»ºè­°æ‚¨å¯ä»¥å®‰æ’ä¸€äº›è¼•åº¦çš„æˆ¶å¤–æ´»å‹•ã€‚"</p>
                                <div class="text-xs text-slate-500">2åˆ†é˜å‰</div>
                            </div>
                            <button onclick="switchTab('ai-consultation')" class="btn-primary w-full interactive-element">
                                é–‹å§‹å°è©±
                            </button>
                        </div>

                        <!-- Recent Activities -->
                        <div class="neo-card p-6">
                            <h3 class="font-semibold text-slate-800 mb-4">æœ€è¿‘æ´»å‹•</h3>
                            <div class="space-y-4">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center">
                                        <span class="text-sm">âœ…</span>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-slate-700">å®Œæˆæ™¨é–“é‹å‹•</p>
                                        <p class="text-xs text-slate-500">30åˆ†é˜å‰</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <span class="text-sm">ğŸš—</span>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-slate-700">å¤–å‡ºè³¼ç‰©</p>
                                        <p class="text-xs text-slate-500">1å°æ™‚å‰</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center">
                                        <span class="text-sm">ğŸ’Š</span>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-slate-700">æŒ‰æ™‚æœè—¥</p>
                                        <p class="text-xs text-slate-500">3å°æ™‚å‰</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Family Status -->
                        <div class="neo-card p-6">
                            <h3 class="font-semibold text-slate-800 mb-4">å®¶åº­æˆå“¡</h3>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-2">
                                        <div class="w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center text-white text-xs font-bold">é™³</div>
                                        <span class="text-sm text-slate-700">é™³ç¾ç²</span>
                                    </div>
                                    <div class="w-2 h-2 status-online rounded-full"></div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-2">
                                        <div class="w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center text-white text-xs font-bold">ç‹</div>
                                        <span class="text-sm text-slate-700">ç‹å¿—æ˜</span>
                                    </div>
                                    <div class="w-2 h-2 status-online rounded-full"></div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-2">
                                        <div class="w-8 h-8 bg-pink-500 rounded-lg flex items-center justify-center text-white text-xs font-bold">æ</div>
                                        <span class="text-sm text-slate-700">æå°è¯</span>
                                    </div>
                                    <div class="w-2 h-2 status-warning rounded-full"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Consultation Tab -->
            <div id="ai-consultationContent" class="page">
                <div class="mb-6">
                    <div class="flex justify-center">
                        <div class="neo-card p-2">
                            <div class="flex space-x-2">
                                <button onclick="switchConsultationMode('personal')" class="nav-tab active" id="personalModeBtn">
                                    <span class="flex items-center space-x-2">
                                        <span class="text-lg">ğŸ¤</span>
                                        <span class="font-medium">ä¸€å°ä¸€è«®è©¢</span>
                                    </span>
                                </button>
                                <button onclick="switchConsultationMode('group')" class="nav-tab" id="groupModeBtn">
                                    <span class="flex items-center space-x-2">
                                        <span class="text-lg">ğŸ‘¥</span>
                                        <span class="font-medium">å®¶åº­ç¾¤çµ„</span>
                                    </span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Personal Consultation Mode -->
                <div id="personalConsultation" class="consultation-mode">
                    <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
                        <!-- Main Caregiver Profile -->
                        <div class="neo-card p-6">
                            <div class="text-center mb-4">
                                <div class="w-20 h-20 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full mx-auto mb-3 flex items-center justify-center text-2xl text-white font-bold">
                                    é™³
                                </div>
                                <h3 class="text-lg font-semibold">é™³ç¾ç²</h3>
                                <p class="text-sm text-gray-600">ä¸»è¦ç…§é¡§è€… â€¢ ç‹çˆºçˆºå¥³å…’</p>
                            </div>
                            
                            <div class="space-y-4">
                                <div class="p-3 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl">
                                    <h4 class="font-medium mb-2">ç…§è­·ç¶“é©—</h4>
                                    <div class="text-sm text-gray-600 space-y-1">
                                        <p>â€¢ ç…§è­·æ™‚é–“ï¼š2å¹´3å€‹æœˆ</p>
                                        <p>â€¢ ç…§è­·å¼·åº¦ï¼šå…¨æ—¥ç…§è­·</p>
                                        <p>â€¢ å°ˆæ¥­è¨“ç·´ï¼šå·²å®ŒæˆåŸºç¤è¨“ç·´</p>
                                    </div>
                                </div>
                                
                                <div class="p-3 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl">
                                    <h4 class="font-medium mb-2">æœ€è¿‘é—œæ³¨</h4>
                                    <div class="text-sm text-gray-600 space-y-1">
                                        <p>â€¢ å¤œé–“ç¡çœ å“è³ª</p>
                                        <p>â€¢ é§•é§›å®‰å…¨è©•ä¼°</p>
                                        <p>â€¢ æƒ…ç·’æ³¢å‹•ç®¡ç†</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Personal AI Chat -->
                        <div class="lg:col-span-3">
                            <div class="neo-card p-6">
                                <div class="flex items-center justify-between mb-6 pb-4 border-b border-slate-200">
                                    <div class="flex items-center space-x-4">
                                        <div class="w-12 h-12 bg-gradient-to-br from-brand-400 to-brand-600 rounded-xl flex items-center justify-center text-white text-xl shadow-glow">
                                            ğŸŒ§ï¸
                                        </div>
                                        <div>
                                            <h3 class="text-lg font-semibold text-slate-800">å°é›¨å°ˆå±¬è«®è©¢</h3>
                                            <p class="text-sm text-slate-500">é‡å°æ‚¨çš„ç…§è­·éœ€æ±‚æä¾›å€‹äººåŒ–å»ºè­°</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-2 h-2 status-online rounded-full"></div>
                                        <span class="text-sm text-slate-600">ç·šä¸Š</span>
                                    </div>
                                </div>

                                <div class="h-96 overflow-y-auto custom-scrollbar space-y-4 mb-6" id="personalChatMessages">
                                    <div class="message-ai p-4">
                                        <div class="flex items-start space-x-3">
                                            <div class="w-8 h-8 bg-gradient-to-br from-slate-100 to-slate-200 rounded-lg flex items-center justify-center text-sm">
                                                ğŸŒ§ï¸
                                            </div>
                                            <div>
                                                <p class="text-sm text-slate-700">é™³å¥³å£«æ‚¨å¥½ï¼æˆ‘æ³¨æ„åˆ°æ‚¨æœ€è¿‘ç¶“å¸¸è©¢å•é—œæ–¼ç‹çˆºçˆºçš„é§•é§›å®‰å…¨å•é¡Œã€‚ä»Šå¤©æœ‰ä»€éº¼ç‰¹åˆ¥æƒ³è¨è«–çš„å—ï¼Ÿ</p>
                                                <div class="text-xs text-slate-500 mt-2">å°é›¨ â€¢ å‰›å‰›</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex space-x-3 mb-4">
                                    <input type="text" 
                                           placeholder="è¼¸å…¥æ‚¨çš„å•é¡Œæˆ–æ“”æ†‚..." 
                                           class="flex-1 form-input"
                                           id="personalChatInput"
                                           onkeypress="if(event.key==='Enter') sendPersonalMessage()">
                                    <button onclick="sendPersonalMessage()" class="btn-primary interactive-element">
                                        ç™¼é€
                                    </button>
                                </div>

                                <!-- Quick Questions -->
                                <div class="flex flex-wrap gap-2">
                                    <button onclick="quickPersonalQuestion('sleep')" class="px-3 py-2 text-xs bg-slate-100 hover:bg-slate-200 rounded-lg transition-colors interactive-element">
                                        ğŸ˜´ ç¡çœ å•é¡Œ
                                    </button>
                                    <button onclick="quickPersonalQuestion('driving')" class="px-3 py-2 text-xs bg-slate-100 hover:bg-slate-200 rounded-lg transition-colors interactive-element">
                                        ğŸš— é§•é§›å®‰å…¨
                                    </button>
                                    <button onclick="quickPersonalQuestion('behavior')" class="px-3 py-2 text-xs bg-slate-100 hover:bg-slate-200 rounded-lg transition-colors interactive-element">
                                        ğŸ§  è¡Œç‚ºè®ŠåŒ–
                                    </button>
                                    <button onclick="quickPersonalQuestion('emergency')" class="px-3 py-2 text-xs bg-slate-100 hover:bg-slate-200 rounded-lg transition-colors interactive-element">
                                        ğŸš¨ ç·Šæ€¥è™•ç†
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Group Consultation Mode -->
                <div id="groupConsultation" class="consultation-mode" style="display: none;">
                    <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
                        <!-- Family Members Panel -->
                        <div class="neo-card p-6">
                            <h3 class="text-lg font-semibold text-slate-800 mb-4">ğŸ‘¥ å®¶åº­æˆå“¡</h3>
                            
                            <div class="space-y-3">
                                <!-- Main Caregiver -->
                                <div class="neo-card p-3 interactive-element">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white text-xs font-bold">é™³</div>
                                        <div class="flex-1">
                                            <div class="text-sm font-medium">é™³ç¾ç²</div>
                                            <div class="text-xs text-gray-500">ä¸»ç…§é¡§è€…</div>
                                        </div>
                                        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                    </div>
                                    <div class="mt-2 text-xs text-gray-600">ğŸ‘‘ ç®¡ç†å“¡æ¬Šé™</div>
                                </div>

                                <!-- Family Member 2 -->
                                <div class="neo-card p-3 interactive-element">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs font-bold">ç‹</div>
                                        <div class="flex-1">
                                            <div class="text-sm font-medium">ç‹å¿—æ˜</div>
                                            <div class="text-xs text-gray-500">å…’å­</div>
                                        </div>
                                        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                    </div>
                                </div>

                                <!-- Family Member 3 -->
                                <div class="neo-card p-3 interactive-element">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-pink-500 rounded-full flex items-center justify-center text-white text-xs font-bold">æ</div>
                                        <div class="flex-1">
                                            <div class="text-sm font-medium">æå°è¯</div>
                                            <div class="text-xs text-gray-500">åª³å©¦</div>
                                        </div>
                                        <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Group Chat -->
                        <div class="lg:col-span-2">
                            <div class="neo-card p-6">
                                <div class="flex items-center justify-between mb-6 pb-4 border-b border-slate-200">
                                    <div class="flex items-center space-x-4">
                                        <div class="w-12 h-12 bg-gradient-to-br from-accent-400 to-accent-600 rounded-xl flex items-center justify-center text-white text-xl shadow-glow-blue">
                                            ğŸ‘¥
                                        </div>
                                        <div>
                                            <h3 class="text-lg font-semibold text-slate-800">å®¶åº­ç¾¤çµ„è«®è©¢</h3>
                                            <p class="text-sm text-slate-500">å”èª¿ç…§è­·äº‹å‹™ â€¢ å…±äº«è³‡è¨Š â€¢ ä»»å‹™åˆ†é…</p>
                                        </div>
                                    </div>
                                    <div class="text-xs text-slate-600">3äººç·šä¸Š</div>
                                </div>

                                <div class="h-96 overflow-y-auto custom-scrollbar space-y-4 mb-6" id="groupChatMessages">
                                    <div class="message-ai p-4">
                                        <div class="flex items-start space-x-3">
                                            <div class="w-8 h-8 bg-gradient-to-br from-slate-100 to-slate-200 rounded-lg flex items-center justify-center text-sm">
                                                ğŸŒ§ï¸
                                            </div>
                                            <div>
                                                <p class="text-sm text-slate-700"><strong>å°é›¨æé†’ï¼š</strong>ç‹çˆºçˆºä»Šå¤©çš„ç”¨è—¥æ™‚é–“å³å°‡åˆ°äº†ï¼ˆæ™šé¤å¾Œ30åˆ†é˜ï¼‰ï¼Œç›®å‰è² è²¬äººæ˜¯é™³ç¾ç²ã€‚</p>
                                                <div class="text-xs text-slate-500 mt-2">ç³»çµ±é€šçŸ¥ â€¢ å‰›å‰›</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex space-x-3">
                                    <input type="text" 
                                           placeholder="åœ¨å®¶åº­ç¾¤çµ„ä¸­ç™¼è¨€..." 
                                           class="flex-1 form-input"
                                           id="groupChatInput"
                                           onkeypress="if(event.key==='Enter') sendGroupMessage()">
                                    <button onclick="sendGroupMessage()" class="btn-secondary interactive-element">
                                        ç™¼é€
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Task Authorization Panel -->
                        <div class="neo-card p-6">
                            <h3 class="text-lg font-semibold text-slate-800 mb-4">ğŸ“ ä»»å‹™åˆ†é…</h3>
                            
                            <div class="space-y-4">
                                <!-- Authorized Tasks -->
                                <div>
                                    <h4 class="text-sm font-medium text-gray-700 mb-2">âœ… å·²æˆæ¬Šä»»å‹™</h4>
                                    <div class="space-y-2">
                                        <div class="p-3 bg-gradient-to-r from-emerald-50 to-green-50 border border-emerald-200 rounded-xl">
                                            <div class="text-xs font-medium mb-1">æ™šé¤ç”¨è—¥æé†’</div>
                                            <div class="text-xs text-emerald-600">è² è²¬äººï¼šç‹å¿—æ˜</div>
                                            <div class="text-xs text-emerald-500 mt-1">â° 19:30</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Pending Tasks -->
                                <div>
                                    <h4 class="text-sm font-medium text-gray-700 mb-2">â³ å¾…æˆæ¬Šä»»å‹™</h4>
                                    <div class="space-y-2">
                                        <div class="p-3 bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-xl">
                                            <div class="text-xs font-medium mb-1">æ˜æ—¥å¾©å¥æ¥é€</div>
                                            <div class="text-xs text-amber-600">éœ€è¦æŒ‡æ´¾è² è²¬äºº</div>
                                            <button onclick="assignTask('rehab')" class="mt-2 text-xs btn-primary">
                                                æŒ‡æ´¾
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation Tab -->
            <div id="navigationContent" class="page">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Main Navigation Panel -->
                    <div class="lg:col-span-2">
                        <div class="neo-card p-8">
                            <div class="flex items-center space-x-4 mb-6">
                                <div class="text-3xl">ğŸš—</div>
                                <div>
                                    <h1 class="text-xl font-bold text-gradient">å°èˆªèˆ‡é§•é§›å®‰å…¨</h1>
                                    <p class="text-sm text-gray-600">ç®¡ç†å¤–å‡ºè·¯ç·šèˆ‡CarPlayè¨­ç½®</p>
                                </div>
                            </div>

                            <!-- Current Driving Status -->
                            <div class="mb-8">
                                <h2 class="text-lg font-semibold mb-4">ğŸš— å³æ™‚é§•é§›ç‹€æ³</h2>
                                <div class="status-card-good rounded-2xl p-6">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-4">
                                            <div class="text-2xl">ğŸ </div>
                                            <div>
                                                <h3 class="font-semibold">å·²å®‰å…¨è¿”å®¶</h3>
                                                <p class="text-sm text-gray-600">ç‹çˆºçˆºç›®å‰åœ¨å®¶ä¸­ï¼Œç‹€æ…‹è‰¯å¥½</p>
                                            </div>
                                        </div>
                                        <button onclick="showDrivingDetail()" class="btn-secondary interactive-element">
                                            æŸ¥çœ‹è©³æƒ…
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Preset Routes -->
                            <div class="mb-8">
                                <div class="flex items-center justify-between mb-4">
                                    <h2 class="text-lg font-semibold">ğŸ“ é è¨­è·¯ç·š</h2>
                                    <button onclick="addNewRoute()" class="btn-primary interactive-element">
                                        â• æ–°å¢è·¯ç·š
                                    </button>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div class="neo-card p-4 interactive-element">
                                        <div class="flex items-center justify-between mb-3">
                                            <div class="text-2xl">ğŸ›’</div>
                                            <button onclick="activateRoute('supermarket')" class="btn-secondary text-xs">
                                                å•Ÿç”¨
                                            </button>
                                        </div>
                                        <h4 class="font-medium">ç¾å»‰ç¤¾</h4>
                                        <p class="text-sm text-gray-600">è·é›¢: 1.2km â€¢ é è¨ˆ8åˆ†é˜</p>
                                    </div>
                                    
                                    <div class="neo-card p-4 interactive-element">
                                        <div class="flex items-center justify-between mb-3">
                                            <div class="text-2xl">ğŸ¥</div>
                                            <button onclick="activateRoute('clinic')" class="btn-secondary text-xs">
                                                å•Ÿç”¨
                                            </button>
                                        </div>
                                        <h4 class="font-medium">è¨ºæ‰€</h4>
                                        <p class="text-sm text-gray-600">è·é›¢: 2.5km â€¢ é è¨ˆ15åˆ†é˜</p>
                                    </div>
                                    
                                    <div class="neo-card p-4 interactive-element">
                                        <div class="flex items-center justify-between mb-3">
                                            <div class="text-2xl">ğŸŒ³</div>
                                            <button onclick="activateRoute('park')" class="btn-secondary text-xs">
                                                å•Ÿç”¨
                                            </button>
                                        </div>
                                        <h4 class="font-medium">å¤§å®‰æ£®æ—å…¬åœ’</h4>
                                        <p class="text-sm text-gray-600">è·é›¢: 3.1km â€¢ é è¨ˆ20åˆ†é˜</p>
                                    </div>
                                </div>
                            </div>

                            <!-- CarPlay Settings -->
                            <div>
                                <h2 class="text-lg font-semibold mb-4">ğŸš— CarPlay ä»‹é¢è¨­ç½®</h2>
                                <div class="neo-card p-6">
                                    <div class="space-y-4">
                                        <div class="p-3 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl">
                                            <h4 class="font-medium mb-2">ğŸš— è»Šè¼‰é¡¯ç¤ºè¨­å®š</h4>
                                            <div class="space-y-2 text-sm">
                                                <label class="flex items-center space-x-2">
                                                    <input type="checkbox" checked class="rounded">
                                                    <span>å•Ÿç”¨å¤§å­—é«”æ¨¡å¼</span>
                                                </label>
                                                <label class="flex items-center space-x-2">
                                                    <input type="checkbox" checked class="rounded">
                                                    <span>ç°¡åŒ–ä»‹é¢é¡¯ç¤º</span>
                                                </label>
                                                <label class="flex items-center space-x-2">
                                                    <input type="checkbox" checked class="rounded">
                                                    <span>èªéŸ³å°èˆªæç¤º</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sidebar -->
                    <div class="space-y-6">
                        <!-- Safety Status -->
                        <div class="neo-card p-6">
                            <h3 class="font-semibold text-slate-800 mb-4">ğŸ›¡ï¸ å®‰å…¨ç›£æ§</h3>
                            <div class="space-y-4">
                                <div class="status-card-good rounded-xl p-4">
                                    <div class="text-center">
                                        <div class="text-2xl font-bold text-emerald-700">95%</div>
                                        <div class="text-sm text-emerald-600">å®‰å…¨è©•åˆ†</div>
                                    </div>
                                </div>
                                <div class="text-sm space-y-2">
                                    <div class="flex justify-between">
                                        <span>æœ¬é€±å¤–å‡º</span>
                                        <span class="font-medium">5æ¬¡</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>åé›¢è·¯ç·š</span>
                                        <span class="font-medium text-green-600">0æ¬¡</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>å¹³å‡è¡Œç¨‹æ™‚é–“</span>
                                        <span class="font-medium">12åˆ†é˜</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Emergency Contacts -->
                        <div class="neo-card p-6">
                            <h3 class="font-semibold text-slate-800 mb-4">ğŸš¨ ç·Šæ€¥è¯çµ¡</h3>
                            <div class="space-y-3">
                                <button onclick="emergencyCall()" class="w-full p-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl interactive-element">
                                    <div class="text-sm font-medium">ğŸ“ ç·Šæ€¥è¯çµ¡</div>
                                    <div class="text-xs opacity-90">110 / 119</div>
                                </button>
                                <button onclick="roadsideAssistance()" class="w-full p-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl interactive-element">
                                    <div class="text-sm font-medium">ğŸš— é“è·¯æ•‘æ´</div>
                                    <div class="text-xs opacity-90">24å°æ™‚æœå‹™</div>
                                </button>
                                <button onclick="familyContact()" class="w-full p-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl interactive-element">
                                    <div class="text-sm font-medium">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶äººè¯çµ¡</div>
                                    <div class="text-xs opacity-90">ä¸€éµé€šçŸ¥æ‰€æœ‰äºº</div>
                                </button>
                            </div>
                        </div>

                        <!-- Recent Trips -->
                        <div class="neo-card p-6">
                            <h3 class="font-semibold text-slate-800 mb-4">ğŸ“Š æœ€è¿‘è¡Œç¨‹</h3>
                            <div class="space-y-3 text-sm">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center">
                                        <span class="text-xs">âœ…</span>
                                    </div>
                                    <div class="flex-1">
                                        <div class="font-medium">ç¾å»‰ç¤¾è³¼ç‰©</div>
                                        <div class="text-xs text-gray-500">ä»Šå¤© 14:30 â€¢ å®‰å…¨æŠµé”</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center">
                                        <span class="text-xs">âœ…</span>
                                    </div>
                                    <div class="flex-1">
                                        <div class="font-medium">è¨ºæ‰€å›è¨º</div>
                                        <div class="text-xs text-gray-500">æ˜¨å¤© 10:00 â€¢ å®‰å…¨æŠµé”</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Family Tab -->
            <div id="familyContent" class="page">
                <div class="neo-card p-8">
                    <h2 class="text-2xl font-bold text-slate-800 mb-6">å®¶åº­å”ä½œç®¡ç†</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <!-- Family Member Cards -->
                        <div class="neo-card p-6 interactive-element">
                            <div class="text-center">
                                <div class="w-16 h-16 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full mx-auto mb-3 flex items-center justify-center text-white text-xl font-bold">
                                    é™³
                                </div>
                                <h3 class="font-semibold">é™³ç¾ç²</h3>
                                <p class="text-sm text-gray-600">ä¸»è¦ç…§é¡§è€…</p>
                                <div class="mt-3">
                                    <div class="w-2 h-2 status-online rounded-full mx-auto"></div>
                                    <div class="text-xs text-emerald-600 mt-1">ç·šä¸Š</div>
                                </div>
                            </div>
                        </div>

                        <div class="neo-card p-6 interactive-element">
                            <div class="text-center">
                                <div class="w-16 h-16 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full mx-auto mb-3 flex items-center justify-center text-white text-xl font-bold">
                                    ç‹
                                </div>
                                <h3 class="font-semibold">ç‹å¿—æ˜</h3>
                                <p class="text-sm text-gray-600">å…’å­</p>
                                <div class="mt-3">
                                    <div class="w-2 h-2 status-online rounded-full mx-auto"></div>
                                    <div class="text-xs text-emerald-600 mt-1">ç·šä¸Š</div>
                                </div>
                            </div>
                        </div>

                        <div class="neo-card p-6 interactive-element">
                            <div class="text-center">
                                <div class="w-16 h-16 bg-gradient-to-br from-pink-400 to-pink-600 rounded-full mx-auto mb-3 flex items-center justify-center text-white text-xl font-bold">
                                    æ
                                </div>
                                <h3 class="font-semibold">æå°è¯</h3>
                                <p class="text-sm text-gray-600">åª³å©¦</p>
                                <div class="mt-3">
                                    <div class="w-2 h-2 status-warning rounded-full mx-auto"></div>
                                    <div class="text-xs text-amber-600 mt-1">å¿™ç¢Œä¸­</div>
                                </div>
                            </div>
                        </div>

                        <div class="neo-card p-6 interactive-element">
                            <div class="text-center">
                                <div class="w-16 h-16 bg-gradient-to-br from-green-400 to-green-600 rounded-full mx-auto mb-3 flex items-center justify-center text-white text-xl font-bold">
                                    å¼µ
                                </div>
                                <h3 class="font-semibold">å¼µæ·‘èŠ¬</h3>
                                <p class="text-sm text-gray-600">çœ‹è­·</p>
                                <div class="mt-3">
                                    <div class="w-2 h-2 status-online rounded-full mx-auto"></div>
                                    <div class="text-xs text-emerald-600 mt-1">å€¼ç­ä¸­</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Family Coordination Tools -->
                    <div class="mt-8 grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="neo-card p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ“… å…±åŒè¡Œäº‹æ›†</h3>
                            <div class="space-y-3">
                                <div class="p-3 bg-blue-50 border border-blue-200 rounded-xl">
                                    <div class="font-medium text-blue-800">æ˜å¤© 14:30</div>
                                    <div class="text-sm text-blue-600">å¾©å¥ç§‘å›è¨º</div>
                                    <div class="text-xs text-blue-500">è² è²¬äºº: ç‹å¿—æ˜</div>
                                </div>
                                <div class="p-3 bg-green-50 border border-green-200 rounded-xl">
                                    <div class="font-medium text-green-800">é€±å…­ 10:00</div>
                                    <div class="text-sm text-green-600">å®¶åº­èšé¤</div>
                                    <div class="text-xs text-green-500">åœ°é»: å®¶ä¸­</div>
                                </div>
                            </div>
                        </div>

                        <div class="neo-card p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ“‹ ä»»å‹™æ¸…å–®</h3>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 bg-amber-50 border border-amber-200 rounded-xl">
                                    <div>
                                        <div class="font-medium text-amber-800">è—¥ç‰©è£œå……</div>
                                        <div class="text-xs text-amber-600">é è¨ˆé€±ä¸‰ç”¨å®Œ</div>
                                    </div>
                                    <button class="btn-primary text-xs">
                                        æŒ‡æ´¾
                                    </button>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-purple-50 border border-purple-200 rounded-xl">
                                    <div>
                                        <div class="font-medium text-purple-800">å®šæœŸå¥åº·æª¢æŸ¥</div>
                                        <div class="text-xs text-purple-600">æ¯æœˆä¾‹è¡Œæª¢æŸ¥</div>
                                    </div>
                                    <button class="btn-secondary text-xs">
                                        å®‰æ’
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Current active tab and consultation mode
        let activeTab = 'overview';
        let activeConsultationMode = 'personal';

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            // Add welcome messages
            setTimeout(() => {
                addPersonalChatMessage('é™³å¥³å£«ï¼Œå¾ˆé«˜èˆˆè¦‹åˆ°æ‚¨ï¼æˆ‘æ˜¯å°é›¨ï¼Œæ‚¨çš„å°ˆå±¬AIç…§è­·åŠ©ç†ã€‚æˆ‘å·²ç¶“åˆ†æäº†ç‹çˆ·çˆ·æœ€è¿‘çš„ç‹€æ³ï¼Œæœ‰ä»»ä½•å•é¡Œéƒ½å¯ä»¥éš¨æ™‚å‘æˆ‘è«®è©¢ã€‚ä»Šå¤©æƒ³èŠä»€éº¼å‘¢ï¼Ÿ', false);
            }, 1000);
        }

        // Tab switching function
        function switchTab(tab) {
            activeTab = tab;
            
            // Remove active class from all tabs and content
            document.querySelectorAll('.nav-tab').forEach(btn => {
                if (btn.id.includes('Tab')) btn.classList.remove('active');
            });
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            
            // Add active class to selected tab and content
            document.getElementById(tab + 'Tab').classList.add('active');
            document.getElementById(tab + 'Content').classList.add('active');
        }

        // Consultation mode switching
        function switchConsultationMode(mode) {
            activeConsultationMode = mode;
            
            // Update mode buttons
            document.getElementById('personalModeBtn').classList.remove('active');
            document.getElementById('groupModeBtn').classList.remove('active');
            document.getElementById(mode + 'ModeBtn').classList.add('active');
            
            // Show/hide consultation panels
            if (mode === 'personal') {
                document.getElementById('personalConsultation').style.display = 'block';
                document.getElementById('groupConsultation').style.display = 'none';
            } else {
                document.getElementById('personalConsultation').style.display = 'none';
                document.getElementById('groupConsultation').style.display = 'block';
            }
        }

        // Personal consultation functions
        function sendPersonalMessage() {
            const input = document.getElementById('personalChatInput');
            const message = input.value.trim();
            
            if (message) {
                addPersonalChatMessage(message, true);
                input.value = '';
                
                setTimeout(() => {
                    const response = generatePersonalAIResponse(message);
                    addPersonalChatMessage(response, false);
                }, 2000);
            }
        }

        function addPersonalChatMessage(message, isUser = false) {
            const chatContainer = document.getElementById('personalChatMessages');
            const messageDiv = document.createElement('div');
            
            if (isUser) {
                messageDiv.className = 'message-user p-4';
                messageDiv.innerHTML = `
                    <div class="text-sm">${message}</div>
                    <div class="text-xs opacity-80 mt-2">æ‚¨ â€¢ å‰›å‰›</div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="message-ai p-4">
                        <div class="flex items-start space-x-3">
                            <div class="w-8 h-8 bg-gradient-to-br from-slate-100 to-slate-200 rounded-lg flex items-center justify-center text-sm">
                                ğŸŒ§ï¸
                            </div>
                            <div>
                                <p class="text-sm text-slate-700">${message}</p>
                                <div class="text-xs text-slate-500 mt-2">å°é›¨ â€¢ å‰›å‰›</div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function generatePersonalAIResponse(message) {
            const responses = {
                'sleep': 'é—œæ–¼ç¡çœ å•é¡Œï¼Œæˆ‘è§€å¯Ÿåˆ°ç‹çˆºçˆºæœ€è¿‘çš„ç¡çœ æ¨¡å¼æœ‰äº›è®ŠåŒ–ã€‚å»ºè­°ï¼š<br><br>ğŸŒ™ <strong>ç’°å¢ƒèª¿æ•´ï¼š</strong> ä¿æŒæˆ¿é–“å®‰éœã€é©æº«<br>â° <strong>ä½œæ¯è¦å¾‹ï¼š</strong> å›ºå®šå°±å¯¢å’Œèµ·åºŠæ™‚é–“<br>ğŸš« <strong>é¿å…åˆºæ¿€ï¼š</strong> ç¡å‰æ¸›å°‘å’–å•¡å› å’Œè¢å¹•æ™‚é–“<br>ğŸ’Š <strong>è—¥ç‰©æª¢è¦–ï¼š</strong> èˆ‡é†«å¸«è¨è«–æ˜¯å¦éœ€è¦èª¿æ•´ç”¨è—¥<br><br>éœ€è¦æˆ‘å¹«æ‚¨åˆ¶å®šè©³ç´°çš„ç¡çœ æ”¹å–„è¨ˆåŠƒå—ï¼Ÿ',
                
                'driving': 'é§•é§›å®‰å…¨æ˜¯å¾ˆé‡è¦çš„è€ƒé‡ã€‚æ ¹æ“šæœ€è¿‘çš„GPSæ•¸æ“šåˆ†æï¼š<br><br>ğŸš— <strong>èƒ½åŠ›è©•ä¼°ï¼š</strong> ç‹çˆºçˆºåœ¨ç†Ÿæ‚‰è·¯ç·šè¡¨ç¾è‰¯å¥½<br>âš ï¸ <strong>æ³¨æ„äº‹é …ï¼š</strong> è¤‡é›œè·¯æ³æ™‚éœ€è¦æ›´å¤šæ™‚é–“<br>ğŸ“± <strong>æŠ€è¡“å”åŠ©ï¼š</strong> å»ºè­°ä½¿ç”¨èªéŸ³å°èˆªå’Œå¤§å­—é«”<br>ğŸ‘¥ <strong>å®¶äººé™ªä¼´ï¼š</strong> æ–°è·¯ç·šå»ºè­°å…ˆæœ‰äººé™ªåŒ<br><br>æˆ‘å¯ä»¥å”åŠ©æ‚¨è¨­å®šæ›´è©³ç´°çš„é§•é§›å®‰å…¨ç›£æ§ç³»çµ±ã€‚',
                
                'behavior': 'è¡Œç‚ºè®ŠåŒ–éœ€è¦ä»”ç´°è§€å¯Ÿå’Œè¨˜éŒ„ï¼š<br><br>ğŸ“Š <strong>æ¨¡å¼åˆ†æï¼š</strong> æˆ‘æœƒæŒçºŒç›£æ§ä¸¦æä¾›è¶¨å‹¢å ±å‘Š<br>ğŸ§  <strong>èªçŸ¥è©•ä¼°ï¼š</strong> å»ºè­°å®šæœŸé€²è¡Œç°¡å–®çš„èªçŸ¥æ¸¬è©¦<br>ğŸ’ <strong>æƒ…æ„Ÿæ”¯æŒï¼š</strong> ä¿æŒè€å¿ƒå’Œç†è§£å¾ˆé‡è¦<br>ğŸ‘¨â€âš•ï¸ <strong>å°ˆæ¥­è«®è©¢ï¼š</strong> é¡¯è‘—è®ŠåŒ–æ™‚æ‡‰åŠæ™‚å°±é†«<br><br>æ‚¨æœ‰æ³¨æ„åˆ°å“ªäº›å…·é«”çš„è¡Œç‚ºè®ŠåŒ–å—ï¼Ÿ',
                
                'emergency': 'ç·Šæ€¥æƒ…æ³è™•ç†æµç¨‹ï¼š<br><br>ğŸš¨ <strong>ç«‹å³è¡Œå‹•ï¼š</strong> ç¢ºä¿ç‹çˆºçˆºå®‰å…¨ï¼Œå¿…è¦æ™‚æ’¥æ‰“119<br>ğŸ“ <strong>è¯çµ¡ç¶²çµ¡ï¼š</strong> æˆ‘æœƒåŒæ™‚é€šçŸ¥æ‰€æœ‰å®¶åº­æˆå“¡<br>ğŸ¥ <strong>é†«ç™‚è³‡è¨Šï¼š</strong> æº–å‚™å¥½ç”¨è—¥æ¸…å–®å’Œé†«ç™‚ç´€éŒ„<br>ğŸ“ <strong>ä½ç½®è¿½è¹¤ï¼š</strong> GPSå®šä½åŠŸèƒ½éš¨æ™‚å¯ç”¨<br><br>æˆ‘å·²ç¶“ç‚ºæ‚¨é è¨­äº†ç·Šæ€¥è¯çµ¡äººé †åºå’Œè™•ç†æ­¥é©Ÿã€‚'
            };

            for (const [key, response] of Object.entries(responses)) {
                if (message.toLowerCase().includes(key) || 
                    (key === 'sleep' && (message.includes('ç¡çœ ') || message.includes('å¤±çœ '))) ||
                    (key === 'driving' && (message.includes('é–‹è»Š') || message.includes('é§•é§›'))) ||
                    (key === 'behavior' && (message.includes('è¡Œç‚º') || message.includes('æƒ…ç·’'))) ||
                    (key === 'emergency' && (message.includes('ç·Šæ€¥') || message.includes('å±éšª')))) {
                    return response;
                }
            }
            
            return `æˆ‘ç†è§£æ‚¨çš„æ“”æ†‚ã€‚ä½œç‚ºæ‚¨çš„å°ˆå±¬AIåŠ©ç†ï¼Œæˆ‘å»ºè­°æˆ‘å€‘å¯ä»¥ï¼š<br><br>ğŸ’­ <strong>æ·±åº¦åˆ†æï¼š</strong> è®“æˆ‘æ›´è©³ç´°åœ°äº†è§£å…·é«”æƒ…æ³<br>ğŸ“‹ <strong>å€‹äººåŒ–å»ºè­°ï¼š</strong> æ ¹æ“šç‹çˆºçˆºçš„ç‹€æ³æä¾›å»ºè­°<br>ğŸ‘¥ <strong>å®¶åº­å”èª¿ï¼š</strong> å¿…è¦æ™‚å”èª¿å…¶ä»–å®¶åº­æˆå“¡å”åŠ©<br>ğŸ“Š <strong>æŒçºŒè¿½è¹¤ï¼š</strong> æˆ‘æœƒæŒçºŒé—œæ³¨ä¸¦æä¾›æ›´æ–°<br><br>æ‚¨èƒ½å‘Šè¨´æˆ‘æ›´å¤šå…·é«”çš„æƒ…æ³å—ï¼Ÿé€™æ¨£æˆ‘èƒ½æä¾›æ›´ç²¾æº–çš„å»ºè­°ã€‚`;
        }

        function quickPersonalQuestion(type) {
            const questions = {
                'sleep': 'æœ€è¿‘çˆ¸çˆ¸çš„ç¡çœ å“è³ªæ€éº¼æ¨£ï¼Ÿæœ‰ä»€éº¼æ”¹å–„å»ºè­°å—ï¼Ÿ',
                'driving': 'é—œæ–¼çˆ¸çˆ¸çš„é§•é§›å®‰å…¨ï¼Œæˆ‘æ‡‰è©²æ³¨æ„å“ªäº›è­¦è¨Šï¼Ÿ',
                'behavior': 'å¦‚ä½•åˆ¤æ–·çˆ¸çˆ¸çš„è¡Œç‚ºè®ŠåŒ–æ˜¯å¦éœ€è¦å°ˆæ¥­å”åŠ©ï¼Ÿ',
                'emergency': 'å¦‚æœç™¼ç”Ÿç·Šæ€¥ç‹€æ³ï¼Œæˆ‘æ‡‰è©²æ€éº¼è™•ç†ï¼Ÿ'
            };
            
            const input = document.getElementById('personalChatInput');
            input.value = questions[type];
            sendPersonalMessage();
        }

        // Group consultation functions
        function sendGroupMessage() {
            const input = document.getElementById('groupChatInput');
            const message = input.value.trim();
            
            if (message) {
                addGroupChatMessage(message, 'é™³', 'purple');
                input.value = '';
                
                setTimeout(() => {
                    const response = generateGroupAIResponse(message);
                    addGroupChatMessage(response, 'ğŸŒ§ï¸', 'ai');
                }, 2000);
            }
        }

        function addGroupChatMessage(message, sender, color) {
            const chatContainer = document.getElementById('groupChatMessages');
            const messageDiv = document.createElement('div');
            
            if (color === 'ai') {
                messageDiv.innerHTML = `
                    <div class="message-ai p-4">
                        <div class="flex items-start space-x-3">
                            <div class="w-8 h-8 bg-gradient-to-br from-slate-100 to-slate-200 rounded-lg flex items-center justify-center text-sm">
                                ğŸŒ§ï¸
                            </div>
                            <div>
                                <p class="text-sm text-slate-700">${message}</p>
                                <div class="text-xs text-slate-500 mt-2">å°é›¨ â€¢ å‰›å‰›</div>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="message-family p-4">
                        <div class="flex items-start space-x-3">
                            <div class="w-6 h-6 bg-${color}-500 rounded-full flex items-center justify-center text-white text-xs font-bold">${sender}</div>
                            <div class="flex-1">
                                <div class="text-xs text-slate-500 mb-1">é™³ç¾ç²</div>
                                <p class="text-sm">${message}</p>
                                <div class="text-xs opacity-80 mt-1">å‰›å‰›</div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function generateGroupAIResponse(message) {
            return `æ„Ÿè¬é™³ç¾ç²çš„åˆ†äº«ã€‚æˆ‘å»ºè­°å…¨å®¶å¯ä»¥é€™æ¨£åˆ†å·¥ï¼š<br><br>ğŸ“‹ <strong>ä»»å‹™åˆ†é…å»ºè­°ï¼š</strong><br>â€¢ ç‹å¿—æ˜ï¼šè² è²¬é€±é–“æ™šé¤æ™‚æ®µç…§è­·<br>â€¢ æå°è¯ï¼šè² è²¬é€±æœ«æ—¥é–“æ´»å‹•å®‰æ’<br>â€¢ å¼µæ·‘èŠ¬ï¼šæŒçºŒå¤œé–“å°ˆæ¥­ç…§è­·<br>â€¢ é™³ç¾ç²ï¼šçµ±ç±Œå”èª¿å’Œé†«ç™‚æ±ºç­–<br><br>æˆ‘å·²ç¶“å°‡ç›¸é—œä»»å‹™åŠ å…¥å¾…æˆæ¬Šæ¸…å–®ï¼Œè«‹ä¸»ç…§é¡§è€…ç¢ºèªåˆ†é…ã€‚<br><br>æœ‰ä»»ä½•èª¿æ•´éœ€æ±‚å—ï¼Ÿ`;
        }

        // Navigation functions
        function showDrivingDetail() {
            alert('ğŸ“ å³æ™‚ä½ç½®è³‡è¨Šï¼š\n\nä½ç½®ï¼šå®¶ä¸­\nç‹€æ…‹ï¼šå®‰å…¨\næœ€å¾Œæ›´æ–°ï¼šå‰›å‰›\n\nä»Šæ—¥å¤–å‡ºè¨˜éŒ„ï¼š\nâœ… 14:30-15:15 ç¾å»‰ç¤¾è³¼ç‰©\nâœ… æŒ‰é è¨­è·¯ç·šè¡Œé§›\nâœ… ç„¡åé›¢è¡Œç‚º');
        }

        function addNewRoute() {
            const routeName = prompt('è«‹è¼¸å…¥è·¯ç·šåç¨±ï¼ˆä¾‹å¦‚ï¼šå…¨è¯ç¦åˆ©ä¸­å¿ƒï¼‰ï¼š');
            if (routeName) {
                alert(`æ–°è·¯ç·šã€Œ${routeName}ã€å·²æ·»åŠ ï¼\n\næ¥ä¸‹ä¾†è«‹ï¼š\n1. åœ¨æ‰‹æ©Ÿåœ°åœ–ä¸­è¨­å®šç›®çš„åœ°\n2. ç¢ºèªæœ€ä½³è·¯ç·š\n3. å„²å­˜ç‚ºé è¨­è·¯ç·š\n4. è¨­å®šCarPlayé¡¯ç¤ºé¸é …`);
            }
        }

        function activateRoute(routeId) {
            const routes = {
                supermarket: 'ç¾å»‰ç¤¾',
                clinic: 'è¨ºæ‰€',
                park: 'å¤§å®‰æ£®æ—å…¬åœ’'
            };
            
            alert(`å·²å•Ÿç”¨è·¯ç·šï¼š${routes[routeId]}\n\nâœ… å·²åŒæ­¥åˆ°CarPlay\nâœ… èªéŸ³å°èˆªå·²æº–å‚™\nâœ… å®‰å…¨ç›£æ§å·²å•Ÿå‹•\n\nç‹çˆºçˆºä¸‹æ¬¡ä½¿ç”¨è»Šè¼›æ™‚ï¼Œæ­¤è·¯ç·šå°‡è‡ªå‹•é¡¯ç¤ºåœ¨ä¸»ç•«é¢ã€‚`);
        }

        // Task management functions
        function assignTask(taskType) {
            const tasks = {
                'rehab': {
                    name: 'æ˜æ—¥å¾©å¥æ¥é€',
                    options: ['ç‹å¿—æ˜', 'æå°è¯', 'å¼µæ·‘èŠ¬']
                }
            };
            
            const task = tasks[taskType];
            const assignee = prompt(`è«‹é¸æ“‡ã€Œ${task.name}ã€çš„è² è²¬äººï¼š\n\nå¯é¸æ“‡ï¼š${task.options.join('ã€')}`);
            
            if (assignee && task.options.includes(assignee)) {
                alert(`âœ… ä»»å‹™å·²æŒ‡æ´¾çµ¦ ${assignee}\n\nä»»å‹™ï¼š${task.name}\nç³»çµ±å°‡è‡ªå‹•ç™¼é€é€šçŸ¥çµ¦ç›¸é—œäººå“¡ã€‚`);
            }
        }

        // Quick action functions
        function emergencyCall() {
            alert('ğŸš¨ ç·Šæ€¥è¯çµ¡åŠŸèƒ½\n\næ­£åœ¨é€£æ¥ç·Šæ€¥æœå‹™...\nâ€¢ 110 è­¦å¯Ÿå±€\nâ€¢ 119 æ¶ˆé˜²å±€\nâ€¢ å®¶åº­é†«å¸«\nâ€¢ ä¸»è¦è¯çµ¡äºº\n\nåŒæ™‚ç™¼é€ä½ç½®è³‡è¨Šçµ¦æ‰€æœ‰å®¶åº­æˆå“¡');
        }

        function showLocation() {
            alert('ğŸ“ ç‹çˆºçˆºç›®å‰ä½ç½®\n\nåœ°å€ï¼šå°åŒ—å¸‚å¤§å®‰å€â—‹â—‹è·¯â—‹â—‹è™Ÿ\nç‹€æ…‹ï¼šåœ¨å®¶ä¸­\næœ€å¾Œæ›´æ–°ï¼šå‰›å‰›\n\nå®‰å…¨å€åŸŸï¼šâœ… ç¶ è‰²ï¼ˆå®‰å…¨ï¼‰\nç§»å‹•ç‹€æ…‹ï¼šéœæ­¢\nGPSä¿¡è™Ÿï¼šå¼·');
        }

        function medicineReminder() {
            alert('ğŸ’Š ç”¨è—¥æé†’è¨­ç½®\n\nä¸‹æ¬¡ç”¨è—¥æ™‚é–“ï¼šä»Šæ—¥ 19:30\nè—¥ç‰©åç¨±ï¼šæ™šé¤å¾Œè—¥ç‰©\næé†’æ–¹å¼ï¼š\nâ€¢ æ‰‹æ©Ÿæ¨æ’­é€šçŸ¥\nâ€¢ èªéŸ³æé†’\nâ€¢ å®¶äººåŒæ­¥é€šçŸ¥\n\nâœ… æé†’å·²è¨­ç½®');
        }

        function medicalRecord() {
            alert('ğŸ¥ é†«ç™‚è¨˜éŒ„\n\næœ€è¿‘å°±è¨ºï¼š\nâ€¢ 2024/1/15 å…§ç§‘å›è¨º\nâ€¢ è¡€å£“ï¼š130/85\nâ€¢ è¡€ç³–ï¼šæ­£å¸¸\nâ€¢ ç”¨è—¥ï¼šæŒ‰æ™‚æœç”¨\n\nä¸‹æ¬¡é ç´„ï¼š\nâ€¢ 2024/1/29 å¾©å¥ç§‘\nâ€¢ æ™‚é–“ï¼š14:30');
        }

        function roadsideAssistance() {
            alert('ğŸš— é“è·¯æ•‘æ´æœå‹™\n\næ­£åœ¨ç‚ºæ‚¨é€£æ¥é“è·¯æ•‘æ´...\nâ€¢ 24å°æ™‚æœå‹™å°ˆç·š\nâ€¢ GPSå®šä½å·²ç™¼é€\nâ€¢ é è¨ˆåˆ°é”æ™‚é–“ï¼š15-30åˆ†é˜\n\nåŒæ™‚é€šçŸ¥å®¶åº­æˆå“¡ç•¶å‰ç‹€æ³');
        }

        function familyContact() {
            alert('ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶åº­è¯çµ¡ç¶²\n\næ­£åœ¨é€šçŸ¥æ‰€æœ‰å®¶åº­æˆå“¡ï¼š\nâœ… é™³ç¾ç² - å·²é€šçŸ¥\nâœ… ç‹å¿—æ˜ - å·²é€šçŸ¥\nâœ… æå°è¯ - å·²é€šçŸ¥\nâœ… å¼µæ·‘èŠ¬ - å·²é€šçŸ¥\n\nåŒ…å«ç•¶å‰ä½ç½®å’Œç‹€æ³èªªæ˜');
        }

        // Periodic updates simulation
        setInterval(() => {
            if (Math.random() > 0.8) { // 20% chance every 10 seconds
                console.log('System status update simulated');
            }
        }, 10000);
    </script>
</body>
</html>